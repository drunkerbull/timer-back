(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{nrXP:function(t,n,e){"use strict";e.r(n);var i=e("CcnG"),l=e("mrSG"),a=e("gIcY"),o=e("oaey"),r=e("KJJU"),s=function(t){function n(n){var e=t.call(this)||this;return e.settingsService=n,e.formMain=new a.i({name:new a.f(""),surname:new a.f(""),nickname:new a.f(""),blockEveryoneWhoWantAddMeToProject:new a.f(""),blockEveryoneWhoWantWriteMe:new a.f(""),disableNotifications:new a.f("")}),e.formPass=new a.i({currentPass:new a.f(""),newPass:new a.f(""),repeatNewPass:new a.f("")}),e.changeAvatar=!1,e.loadedAvatar=!1,e}return l.c(n,t),n.prototype.ngOnInit=function(){this.formMain.patchValue(this.storageService.user)},n.prototype.changeAvatarImg=function(t){var n=this,e=t.blob,i=new FormData;i.append("avatar",e),this.loadedAvatar=!0;var l=this.settingsService.updateAvatarData(i).subscribe(function(t){n.storageService.user.haveAvatar||n.updateMain({haveAvatar:!0}),n.storageService.user.avatar=e,n.loadedAvatar=!1,n.changeAvatar=!1,n.toastr.success("Image saved")},function(t){return n.errorHandlingService.showError(t)});this.someSubscriptions.add(l)},n.prototype.updateMain=function(t){var n=this;void 0===t&&(t=this.formMain.value);var e=this.settingsService.updateMainData(t).subscribe(function(t){var e=new r.a(t);n.storageService.saveUser(e),n.toastr.success("Data changed")},function(t){return n.errorHandlingService.showError(t)});this.someSubscriptions.add(e)},n.prototype.updatePass=function(){var t=this,n=this.settingsService.updatePassData(this.formPass.value).subscribe(function(n){t.toastr.success("Password changed")},function(n){return t.errorHandlingService.showError(n)});this.someSubscriptions.add(n)},n.prototype.deleteMain=function(){var t=this,n=this.settingsService.deleteMainData().subscribe(function(n){t.toastr.success("User deleted")},function(n){return t.errorHandlingService.showError(n)});this.someSubscriptions.add(n)},n}(o.a),u=function(){return function(){}}(),h=e("pMnS"),c=e("Ip0R"),p=e("urRO"),d=e.n(p),g=function(){function t(){this.cropper=null,this.cropped=new i.m,this.currentImg=null}return t.prototype.onFileChange=function(t){var n=this;this.currentImg=null,this.cropper=null;var e=new FileReader;e.onload=function(t){n.currentImg=t.target.result,setTimeout(function(){n.cropper=new d.a(n.image.nativeElement,{aspectRatio:1,viewMode:1})},100)},e.readAsDataURL(t.target.files[0])},t.prototype.cropImg=function(){var t=this,n=this.cropper.getCroppedCanvas(),e=n.toDataURL("image/jpeg",.7);n.toBlob(function(n){t.cropped.emit({base64:e,blob:n})})},t}(),m=i.ob({encapsulation:0,styles:[[".cropper[_ngcontent-%COMP%]{padding:16px;border:1px solid red}.cropper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]],data:{}});function b(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),i.qb(1,0,[[1,0],["image",1]],null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),i.qb(2,0,null,null,1,"button",[],null,[[null,"click"]],function(t,n,e){var i=!0;return"click"===n&&(i=!1!==t.component.cropImg()&&i),i},null,null)),(t()(),i.Fb(-1,null,["Crop"]))],null,function(t,n){t(n,1,0,n.component.currentImg)})}function f(t){return i.Gb(0,[i.Db(671088640,1,{image:0}),(t()(),i.qb(1,0,null,null,3,"div",[["class","cropper"]],null,null,null,null,null)),(t()(),i.qb(2,0,null,null,0,"input",[["accept","image/x-png,image/png,image/gif,image/jpeg,image/jpg,image/tif,image/tiff"],["type","file"]],null,[[null,"change"]],function(t,n,e){var i=!0;return"change"===n&&(i=!1!==t.component.onFileChange(e)&&i),i},null,null)),(t()(),i.fb(16777216,null,null,1,null,b)),i.pb(4,16384,null,0,c.j,[i.P,i.M],{ngIf:[0,"ngIf"]},null)],function(t,n){t(n,4,0,n.component.currentImg)},null)}var v=e("67Y/"),w=e("yTb8"),C=function(){function t(t){this.baseHttp=t}return t.prototype.getMainData=function(){return this.baseHttp.get("/users/me").pipe(Object(v.a)(function(t){return t}))},t.prototype.updateMainData=function(t){return this.baseHttp.put("/users/me",t).pipe(Object(v.a)(function(t){return t}))},t.prototype.updatePassData=function(t){return this.baseHttp.put("/users/me/pass",t).pipe(Object(v.a)(function(t){return t}))},t.prototype.deleteMainData=function(){return this.baseHttp.delete("/users/me").pipe(Object(v.a)(function(t){return t}))},t.prototype.updateAvatarData=function(t){return this.baseHttp.post("/users/me/avatar",t).pipe(Object(v.a)(function(t){return t}))},t.ngInjectableDef=i.Ib({factory:function(){return new t(i.Mb(w.a))},token:t,providedIn:"root"}),t}(),x=i.ob({encapsulation:0,styles:[['[_nghost-%COMP%]{display:flex}.left-side[_ngcontent-%COMP%]{min-width:220px;margin-right:20px;max-width:220px}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]{min-height:220px;max-height:220px;display:flex;background:#9acd32;margin-bottom:20px;padding:0;position:relative;cursor:pointer}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:100%;transition:.3s;height:100%;background:rgba(0,0,0,0);border-radius:4px}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;cursor:pointer;transition:.3s;opacity:0}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{opacity:1}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]:hover:before{background:rgba(0,0,0,.7)}.main-side[_ngcontent-%COMP%]{width:calc(100% - 220px)}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]{display:flex;flex-flow:column}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:25%;max-width:25%;text-align:right;margin-right:16px}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%}.avatar-change[_ngcontent-%COMP%]{padding:0 16px;height:0;overflow:hidden;margin:0}.avatar-change.avatar-change--open[_ngcontent-%COMP%]{padding:16px;margin:20px 0;height:auto}']],data:{}});function y(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.storageService.user.avatar)})}function M(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"ul",[],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,0,"li",[],null,null,null,null,null))],null,null)}function z(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Yea, black list is empty! Hmm..."]))],null,null)}function D(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,14,"div",[["class","left-side"]],null,null,null,null,null)),(t()(),i.qb(1,0,null,null,4,"div",[["class","avatar-box white-back"]],null,[[null,"click"]],function(t,n,e){var i=!0,l=t.component;return"click"===n&&(i=0!=(l.changeAvatar=!l.changeAvatar)&&i),i},null,null)),(t()(),i.fb(16777216,null,null,1,null,y)),i.pb(3,16384,null,0,c.j,[i.P,i.M],{ngIf:[0,"ngIf"]},null),(t()(),i.qb(4,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Change"])),(t()(),i.qb(6,0,null,null,8,"div",[["class","statistics-box white-back"]],null,null,null,null,null)),(t()(),i.qb(7,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Count of projects: ?"])),(t()(),i.qb(9,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Count of my projects: ?"])),(t()(),i.qb(11,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Count of tasks: ?"])),(t()(),i.qb(13,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Count of my tasks: ?"])),(t()(),i.qb(15,0,null,null,120,"div",[["class","main-side"]],null,null,null,null,null)),(t()(),i.qb(16,0,null,null,5,"div",[["class","avatar-change white-back"]],null,null,null,null,null)),i.Cb(512,null,c.q,c.r,[i.t,i.u,i.k,i.E]),i.pb(18,278528,null,0,c.h,[c.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.Bb(19,{"avatar-change--open":0}),(t()(),i.qb(20,0,null,null,1,"app-cropper",[],null,[[null,"cropped"]],function(t,n,e){var i=!0;return"cropped"===n&&(i=!1!==t.component.changeAvatarImg(e)&&i),i},f,m)),i.pb(21,49152,null,0,g,[],null,{cropped:"cropped"}),(t()(),i.qb(22,0,null,null,63,"div",[["class","main-inputs white-back"]],null,null,null,null,null)),(t()(),i.qb(23,0,null,null,62,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,e){var l=!0,a=t.component;return"submit"===n&&(l=!1!==i.zb(t,25).onSubmit(e)&&l),"reset"===n&&(l=!1!==i.zb(t,25).onReset()&&l),"ngSubmit"===n&&(l=!1!==a.updateMain()&&l),l},null,null)),i.pb(24,16384,null,0,a.x,[],null,null),i.pb(25,540672,null,0,a.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),i.Cb(2048,null,a.c,null,[a.j]),i.pb(27,16384,null,0,a.o,[[4,a.c]],null,null),(t()(),i.qb(28,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(29,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Name:"])),(t()(),i.qb(31,0,null,null,5,"input",[["class","input"],["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,32)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,32).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,32)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,32)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(32,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(34,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(36,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(37,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(38,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Surname:"])),(t()(),i.qb(40,0,null,null,5,"input",[["class","input"],["formControlName","surname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,41)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,41).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,41)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,41)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(41,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(43,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(45,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(46,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(47,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Nickname:"])),(t()(),i.qb(49,0,null,null,5,"input",[["class","input"],["formControlName","nickname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,50)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,50).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,50)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,50)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(50,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(52,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(54,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(55,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(56,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Block everyone who want add me to project"])),(t()(),i.qb(58,0,null,null,5,"input",[["formControlName","blockEveryoneWhoWantAddMeToProject"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(t,n,e){var l=!0;return"change"===n&&(l=!1!==i.zb(t,59).onChange(e.target.checked)&&l),"blur"===n&&(l=!1!==i.zb(t,59).onTouched()&&l),l},null,null)),i.pb(59,16384,null,0,a.b,[i.E,i.k],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.b]),i.pb(61,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(63,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(64,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.qb(65,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(66,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Block everyone who want write me"])),(t()(),i.qb(68,0,null,null,5,"input",[["formControlName","blockEveryoneWhoWantWriteMe"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(t,n,e){var l=!0;return"change"===n&&(l=!1!==i.zb(t,69).onChange(e.target.checked)&&l),"blur"===n&&(l=!1!==i.zb(t,69).onTouched()&&l),l},null,null)),i.pb(69,16384,null,0,a.b,[i.E,i.k],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.b]),i.pb(71,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(73,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(74,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.qb(75,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(76,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Disable notifications"])),(t()(),i.qb(78,0,null,null,5,"input",[["formControlName","disableNotifications"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(t,n,e){var l=!0;return"change"===n&&(l=!1!==i.zb(t,79).onChange(e.target.checked)&&l),"blur"===n&&(l=!1!==i.zb(t,79).onTouched()&&l),l},null,null)),i.pb(79,16384,null,0,a.b,[i.E,i.k],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.b]),i.pb(81,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(83,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(84,0,null,null,1,"button",[["class","btn"],["type","submit"]],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Save"])),(t()(),i.qb(86,0,null,null,34,"div",[["class","main-inputs white-back"]],null,null,null,null,null)),(t()(),i.qb(87,0,null,null,33,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,e){var l=!0,a=t.component;return"submit"===n&&(l=!1!==i.zb(t,89).onSubmit(e)&&l),"reset"===n&&(l=!1!==i.zb(t,89).onReset()&&l),"ngSubmit"===n&&(l=!1!==a.updatePass()&&l),l},null,null)),i.pb(88,16384,null,0,a.x,[],null,null),i.pb(89,540672,null,0,a.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),i.Cb(2048,null,a.c,null,[a.j]),i.pb(91,16384,null,0,a.o,[[4,a.c]],null,null),(t()(),i.qb(92,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(93,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Current password:"])),(t()(),i.qb(95,0,null,null,5,"input",[["class","input"],["formControlName","currentPass"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,96)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,96).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,96)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,96)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(96,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(98,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(100,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(101,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(102,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["New password:"])),(t()(),i.qb(104,0,null,null,5,"input",[["class","input"],["formControlName","newPass"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,105)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,105).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,105)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,105)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(105,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(107,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(109,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(110,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(111,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Repeat password:"])),(t()(),i.qb(113,0,null,null,5,"input",[["class","input"],["formControlName","repeatNewPass"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,114)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,114).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,114)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,114)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(114,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(116,671744,null,0,a.h,[[3,a.c],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(118,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),i.qb(119,0,null,null,1,"button",[["class","btn"],["type","submit"]],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Save"])),(t()(),i.qb(121,0,null,null,14,"div",[["class","white-back"]],null,null,null,null,null)),(t()(),i.qb(122,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Black list:"])),(t()(),i.fb(16777216,null,null,1,null,M)),i.pb(125,16384,null,0,c.j,[i.P,i.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.fb(0,[["blacklistempty",2]],null,0,null,z)),(t()(),i.qb(127,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),i.qb(128,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Fb(-1,null,["Add:"])),(t()(),i.qb(130,0,null,null,5,"input",[["class","input"],["formControlName","repeatNewPass"],["placeholder","Write nickname..."],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var l=!0;return"input"===n&&(l=!1!==i.zb(t,131)._handleInput(e.target.value)&&l),"blur"===n&&(l=!1!==i.zb(t,131).onTouched()&&l),"compositionstart"===n&&(l=!1!==i.zb(t,131)._compositionStart()&&l),"compositionend"===n&&(l=!1!==i.zb(t,131)._compositionEnd(e.target.value)&&l),l},null,null)),i.pb(131,16384,null,0,a.d,[i.E,i.k,[2,a.a]],null,null),i.Cb(1024,null,a.l,function(t){return[t]},[a.d]),i.pb(133,671744,null,0,a.h,[[8,null],[8,null],[8,null],[6,a.l],[2,a.v]],{name:[0,"name"]},null),i.Cb(2048,null,a.m,null,[a.h]),i.pb(135,16384,null,0,a.n,[[4,a.m]],null,null)],function(t,n){var e=n.component;t(n,3,0,e.storageService.user.avatar&&!e.loadedAvatar);var l=t(n,19,0,e.changeAvatar);t(n,18,0,"avatar-change white-back",l),t(n,25,0,e.formMain),t(n,34,0,"name"),t(n,43,0,"surname"),t(n,52,0,"nickname"),t(n,61,0,"blockEveryoneWhoWantAddMeToProject"),t(n,71,0,"blockEveryoneWhoWantWriteMe"),t(n,81,0,"disableNotifications"),t(n,89,0,e.formPass),t(n,98,0,"currentPass"),t(n,107,0,"newPass"),t(n,116,0,"repeatNewPass"),t(n,125,0,e.storageService.user.blackList.length,i.zb(n,126)),t(n,133,0,"repeatNewPass")},function(t,n){t(n,23,0,i.zb(n,27).ngClassUntouched,i.zb(n,27).ngClassTouched,i.zb(n,27).ngClassPristine,i.zb(n,27).ngClassDirty,i.zb(n,27).ngClassValid,i.zb(n,27).ngClassInvalid,i.zb(n,27).ngClassPending),t(n,31,0,i.zb(n,36).ngClassUntouched,i.zb(n,36).ngClassTouched,i.zb(n,36).ngClassPristine,i.zb(n,36).ngClassDirty,i.zb(n,36).ngClassValid,i.zb(n,36).ngClassInvalid,i.zb(n,36).ngClassPending),t(n,40,0,i.zb(n,45).ngClassUntouched,i.zb(n,45).ngClassTouched,i.zb(n,45).ngClassPristine,i.zb(n,45).ngClassDirty,i.zb(n,45).ngClassValid,i.zb(n,45).ngClassInvalid,i.zb(n,45).ngClassPending),t(n,49,0,i.zb(n,54).ngClassUntouched,i.zb(n,54).ngClassTouched,i.zb(n,54).ngClassPristine,i.zb(n,54).ngClassDirty,i.zb(n,54).ngClassValid,i.zb(n,54).ngClassInvalid,i.zb(n,54).ngClassPending),t(n,58,0,i.zb(n,63).ngClassUntouched,i.zb(n,63).ngClassTouched,i.zb(n,63).ngClassPristine,i.zb(n,63).ngClassDirty,i.zb(n,63).ngClassValid,i.zb(n,63).ngClassInvalid,i.zb(n,63).ngClassPending),t(n,68,0,i.zb(n,73).ngClassUntouched,i.zb(n,73).ngClassTouched,i.zb(n,73).ngClassPristine,i.zb(n,73).ngClassDirty,i.zb(n,73).ngClassValid,i.zb(n,73).ngClassInvalid,i.zb(n,73).ngClassPending),t(n,78,0,i.zb(n,83).ngClassUntouched,i.zb(n,83).ngClassTouched,i.zb(n,83).ngClassPristine,i.zb(n,83).ngClassDirty,i.zb(n,83).ngClassValid,i.zb(n,83).ngClassInvalid,i.zb(n,83).ngClassPending),t(n,87,0,i.zb(n,91).ngClassUntouched,i.zb(n,91).ngClassTouched,i.zb(n,91).ngClassPristine,i.zb(n,91).ngClassDirty,i.zb(n,91).ngClassValid,i.zb(n,91).ngClassInvalid,i.zb(n,91).ngClassPending),t(n,95,0,i.zb(n,100).ngClassUntouched,i.zb(n,100).ngClassTouched,i.zb(n,100).ngClassPristine,i.zb(n,100).ngClassDirty,i.zb(n,100).ngClassValid,i.zb(n,100).ngClassInvalid,i.zb(n,100).ngClassPending),t(n,104,0,i.zb(n,109).ngClassUntouched,i.zb(n,109).ngClassTouched,i.zb(n,109).ngClassPristine,i.zb(n,109).ngClassDirty,i.zb(n,109).ngClassValid,i.zb(n,109).ngClassInvalid,i.zb(n,109).ngClassPending),t(n,113,0,i.zb(n,118).ngClassUntouched,i.zb(n,118).ngClassTouched,i.zb(n,118).ngClassPristine,i.zb(n,118).ngClassDirty,i.zb(n,118).ngClassValid,i.zb(n,118).ngClassInvalid,i.zb(n,118).ngClassPending),t(n,130,0,i.zb(n,135).ngClassUntouched,i.zb(n,135).ngClassTouched,i.zb(n,135).ngClassPristine,i.zb(n,135).ngClassDirty,i.zb(n,135).ngClassValid,i.zb(n,135).ngClassInvalid,i.zb(n,135).ngClassPending)})}function k(t){return i.Gb(0,[(t()(),i.qb(0,0,null,null,1,"app-settings",[],null,null,null,D,x)),i.pb(1,245760,null,0,s,[C],null,null)],function(t,n){t(n,1,0)},null)}var P=i.mb("app-settings",s,k,{},{},[]),O=e("t/Na"),E=e("fbMX"),T=e("ZYCi"),N=e("XPwU"),S=e("eG2b"),B=e("NHGN"),q=e("SZbH"),W=e("Zseb"),I=e("dU8u"),H=e("PCNd"),j=function(){return function(){}}();e.d(n,"SettingsRoutingModuleNgFactory",function(){return _});var _=i.nb(u,[],function(t){return i.wb([i.xb(512,i.j,i.ab,[[8,[h.a,P]],[3,i.j],i.y]),i.xb(4608,c.l,c.k,[i.v,[2,c.t]]),i.xb(4608,a.u,a.u,[]),i.xb(4608,O.h,O.n,[c.c,i.C,O.l]),i.xb(4608,O.o,O.o,[O.h,O.m]),i.xb(4608,E.a,E.a,[T.o]),i.xb(4608,O.k,O.k,[]),i.xb(6144,O.i,null,[O.k]),i.xb(4608,O.g,O.g,[O.i]),i.xb(6144,O.b,null,[O.g]),i.xb(4608,O.f,O.j,[O.b,i.r]),i.xb(4608,O.c,O.c,[O.f]),i.xb(5120,O.a,function(t,n,e,i,l){return[t,new N.a(n,e,i,l)]},[O.o,E.a,T.o,T.a,O.c]),i.xb(4608,a.e,a.e,[]),i.xb(4608,S.g,S.d,[O.c]),i.xb(5120,S.f,S.c,[[3,S.f],S.g,i.C,[2,S.b],[2,c.c]]),i.xb(4608,w.a,w.a,[O.c]),i.xb(4608,B.a,B.a,[q.j,E.a]),i.xb(1073742336,T.q,T.q,[[2,T.v],[2,T.o]]),i.xb(1073742336,c.b,c.b,[]),i.xb(1073742336,a.t,a.t,[]),i.xb(1073742336,a.k,a.k,[]),i.xb(1073742336,O.e,O.e,[]),i.xb(1073742336,O.d,O.d,[]),i.xb(1073742336,a.r,a.r,[]),i.xb(1073742336,W.b,W.b,[]),i.xb(1073742336,S.a,S.a,[]),i.xb(1073742336,I.b,I.b,[]),i.xb(1073742336,H.a,H.a,[]),i.xb(1073742336,j,j,[]),i.xb(1073742336,u,u,[]),i.xb(256,O.l,"XSRF-TOKEN",[]),i.xb(256,O.m,"X-XSRF-TOKEN",[]),i.xb(1024,T.m,function(){return[[{path:"",component:s}]]},[])])})},urRO:function(t,n,e){t.exports=function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,i)}return e}function l(t){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?i(l,!0).forEach(function(n){e(t,n,l[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):i(l).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(l,n))})}return t}function a(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="undefined"!=typeof window&&void 0!==window.document,r=o?window:{},s=!!o&&"ontouchstart"in r.document.documentElement,u=!!o&&"PointerEvent"in r,h="".concat("cropper","-crop"),c="".concat("cropper","-disabled"),p="".concat("cropper","-hidden"),d="".concat("cropper","-hide"),g="".concat("cropper","-invisible"),m="".concat("cropper","-modal"),b="".concat("cropper","-move"),f="".concat("cropper","Action"),v="".concat("cropper","Preview"),w=u?"pointerdown":s?"touchstart":"mousedown",C=u?"pointermove":s?"touchmove":"mousemove",x=u?"pointerup pointercancel":s?"touchend touchcancel":"mouseup",y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,M=/^data:/,z=/^data:image\/jpeg;base64,/,D=/^img|canvas$/i,k={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},P=Number.isNaN||r.isNaN;function O(t){return"number"==typeof t&&!P(t)}var E=function(t){return t>0&&t<1/0};function T(t){return void 0===t}function N(n){return"object"===t(n)&&null!==n}var S=Object.prototype.hasOwnProperty;function B(t){if(!N(t))return!1;try{var n=t.constructor,e=n.prototype;return n&&e&&S.call(e,"isPrototypeOf")}catch(i){return!1}}function q(t){return"function"==typeof t}var W=Array.prototype.slice;function I(t){return Array.from?Array.from(t):W.call(t)}function H(t,n){return t&&q(n)&&(Array.isArray(t)||O(t.length)?I(t).forEach(function(e,i){n.call(t,e,i,t)}):N(t)&&Object.keys(t).forEach(function(e){n.call(t,t[e],e,t)})),t}var j=Object.assign||function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return N(t)&&e.length>0&&e.forEach(function(n){N(n)&&Object.keys(n).forEach(function(e){t[e]=n[e]})}),t},_=/\.\d*(?:0|9){12}\d*$/;function R(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return _.test(t)?Math.round(t*n)/n:t}var A=/^width|height|left|top|marginLeft|marginTop$/;function L(t,n){var e=t.style;H(n,function(t,n){A.test(n)&&O(t)&&(t="".concat(t,"px")),e[n]=t})}function X(t,n){if(n)if(O(t.length))H(t,function(t){X(t,n)});else if(t.classList)t.classList.add(n);else{var e=t.className.trim();e?e.indexOf(n)<0&&(t.className="".concat(e," ").concat(n)):t.className=n}}function Y(t,n){n&&(O(t.length)?H(t,function(t){Y(t,n)}):t.classList?t.classList.remove(n):t.className.indexOf(n)>=0&&(t.className=t.className.replace(n,"")))}function U(t,n,e){n&&(O(t.length)?H(t,function(t){U(t,n,e)}):e?X(t,n):Y(t,n))}var F=/([a-z\d])([A-Z])/g;function V(t){return t.replace(F,"$1-$2").toLowerCase()}function G(t,n){return N(t[n])?t[n]:t.dataset?t.dataset[n]:t.getAttribute("data-".concat(V(n)))}function K(t,n,e){N(e)?t[n]=e:t.dataset?t.dataset[n]=e:t.setAttribute("data-".concat(V(n)),e)}var Z=/\s\s*/,$=function(){var t=!1;if(o){var n=!1,e=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,n},set:function(t){n=t}});r.addEventListener("test",e,i),r.removeEventListener("test",e,i)}return t}();function J(t,n,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e;n.trim().split(Z).forEach(function(n){if(!$){var a=t.listeners;a&&a[n]&&a[n][e]&&(l=a[n][e],delete a[n][e],0===Object.keys(a[n]).length&&delete a[n],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(n,l,i)})}function Q(t,n,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e;n.trim().split(Z).forEach(function(n){if(i.once&&!$){var a=t.listeners,o=void 0===a?{}:a;l=function(){delete o[n][e],t.removeEventListener(n,l,i);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];e.apply(t,r)},o[n]||(o[n]={}),o[n][e]&&t.removeEventListener(n,o[n][e],i),o[n][e]=l,t.listeners=o}t.addEventListener(n,l,i)})}function tt(t,n,e){var i;return q(Event)&&q(CustomEvent)?i=new CustomEvent(n,{detail:e,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,e),t.dispatchEvent(i)}function nt(t){var n=t.getBoundingClientRect();return{left:n.left+(window.pageXOffset-document.documentElement.clientLeft),top:n.top+(window.pageYOffset-document.documentElement.clientTop)}}var et=r.location,it=/^(\w+:)\/\/([^:\/?#]*):?(\d*)/i;function lt(t){var n=t.match(it);return null!==n&&(n[1]!==et.protocol||n[2]!==et.hostname||n[3]!==et.port)}function at(t){var n="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+n}function ot(t){var n=t.rotate,e=t.scaleX,i=t.scaleY,l=t.translateX,a=t.translateY,o=[];O(l)&&0!==l&&o.push("translateX(".concat(l,"px)")),O(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),O(n)&&0!==n&&o.push("rotate(".concat(n,"deg)")),O(e)&&1!==e&&o.push("scaleX(".concat(e,")")),O(i)&&1!==i&&o.push("scaleY(".concat(i,")"));var r=o.length?o.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function rt(t,n){var e=t.pageX,i=t.pageY,a={endX:e,endY:i};return n?a:l({startX:e,startY:i},a)}function st(t){var n=t.aspectRatio,e=t.height,i=t.width,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=E(i),o=E(e);if(a&&o){var r=e*n;"contain"===l&&r>i||"cover"===l&&r<i?e=i/n:i=e*n}else a?e=i/n:o&&(i=e*n);return{width:i,height:e}}var ut=String.fromCharCode,ht=/^data:.*,/,ct={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,n=this.options,e=this.container,i=this.cropper;X(i,p),Y(t,p);var l={width:Math.max(e.offsetWidth,Number(n.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(n.minContainerHeight)||100)};this.containerData=l,L(i,{width:l.width,height:l.height}),X(t,p),Y(i,p)},initCanvas:function(){var t=this.containerData,n=this.imageData,e=this.options.viewMode,i=Math.abs(n.rotate)%180==90,l=i?n.naturalHeight:n.naturalWidth,a=i?n.naturalWidth:n.naturalHeight,o=l/a,r=t.width,s=t.height;t.height*o>t.width?3===e?r=t.height*o:s=t.width/o:3===e?s=t.width/o:r=t.height*o;var u={aspectRatio:o,naturalWidth:l,naturalHeight:a,width:r,height:s};u.left=(t.width-r)/2,u.top=(t.height-s)/2,u.oldLeft=u.left,u.oldTop=u.top,this.canvasData=u,this.limited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImageData=j({},n),this.initialCanvasData=j({},u)},limitCanvas:function(t,n){var e=this.options,i=this.containerData,l=this.canvasData,a=this.cropBoxData,o=e.viewMode,r=l.aspectRatio,s=this.cropped&&a;if(t){var u=Number(e.minCanvasWidth)||0,h=Number(e.minCanvasHeight)||0;o>1?(u=Math.max(u,i.width),h=Math.max(h,i.height),3===o&&(h*r>u?u=h*r:h=u/r)):o>0&&(u?u=Math.max(u,s?a.width:0):h?h=Math.max(h,s?a.height:0):s&&((h=a.height)*r>(u=a.width)?u=h*r:h=u/r));var c=st({aspectRatio:r,width:u,height:h});h=c.height,l.minWidth=u=c.width,l.minHeight=h,l.maxWidth=1/0,l.maxHeight=1/0}if(n)if(o>(s?0:1)){var p=i.width-l.width,d=i.height-l.height;l.minLeft=Math.min(0,p),l.minTop=Math.min(0,d),l.maxLeft=Math.max(0,p),l.maxTop=Math.max(0,d),s&&this.limited&&(l.minLeft=Math.min(a.left,a.left+(a.width-l.width)),l.minTop=Math.min(a.top,a.top+(a.height-l.height)),l.maxLeft=a.left,l.maxTop=a.top,2===o&&(l.width>=i.width&&(l.minLeft=Math.min(0,p),l.maxLeft=Math.max(0,p)),l.height>=i.height&&(l.minTop=Math.min(0,d),l.maxTop=Math.max(0,d))))}else l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=i.width,l.maxTop=i.height},renderCanvas:function(t,n){var e=this.canvasData,i=this.imageData;if(n){var l=function(t){var n=t.width,e=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:e,height:n};var l=i%90*Math.PI/180,a=Math.sin(l),o=Math.cos(l),r=n*o+e*a,s=n*a+e*o;return i>90?{width:s,height:r}:{width:r,height:s}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=l.width,o=l.height,r=e.width*(a/e.naturalWidth),s=e.height*(o/e.naturalHeight);e.left-=(r-e.width)/2,e.top-=(s-e.height)/2,e.width=r,e.height=s,e.aspectRatio=a/o,e.naturalWidth=a,e.naturalHeight=o,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,L(this.canvas,j({width:e.width,height:e.height},ot({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var n=this.canvasData,e=this.imageData,i=e.naturalWidth*(n.width/n.naturalWidth),l=e.naturalHeight*(n.height/n.naturalHeight);j(e,{width:i,height:l,left:(n.width-i)/2,top:(n.height-l)/2}),L(this.image,j({width:e.width,height:e.height},ot(j({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,n=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,l={width:n.width,height:n.height};e&&(n.height*e>n.width?l.height=l.width/e:l.width=l.height*e),this.cropBoxData=l,this.limitCropBox(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.width=Math.max(l.minWidth,l.width*i),l.height=Math.max(l.minHeight,l.height*i),l.left=n.left+(n.width-l.width)/2,l.top=n.top+(n.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCropBoxData=j({},l)},limitCropBox:function(t,n){var e=this.options,i=this.containerData,l=this.canvasData,a=this.cropBoxData,o=this.limited,r=e.aspectRatio;if(t){var s=Number(e.minCropBoxWidth)||0,u=Number(e.minCropBoxHeight)||0,h=o?Math.min(i.width,l.width,l.width+l.left,i.width-l.left):i.width,c=o?Math.min(i.height,l.height,l.height+l.top,i.height-l.top):i.height;s=Math.min(s,i.width),u=Math.min(u,i.height),r&&(s&&u?u*r>s?u=s/r:s=u*r:s?u=s/r:u&&(s=u*r),c*r>h?c=h/r:h=c*r),a.minWidth=Math.min(s,h),a.minHeight=Math.min(u,c),a.maxWidth=h,a.maxHeight=c}n&&(o?(a.minLeft=Math.max(0,l.left),a.minTop=Math.max(0,l.top),a.maxLeft=Math.min(i.width,l.left+l.width)-a.width,a.maxTop=Math.min(i.height,l.top+l.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var t=this.options,n=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&K(this.face,f,e.width>=n.width&&e.height>=n.height?"move":"all"),L(this.cropBox,j({width:e.width,height:e.height},ot({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),tt(this.element,"crop",this.getData())}},pt={initPreview:function(){var t=this.element,n=this.crossOrigin,e=this.options.preview,i=n?this.crossOriginUrl:this.url,l=t.alt||"The image to preview",a=document.createElement("img");if(n&&(a.crossOrigin=n),a.src=i,a.alt=l,this.viewBox.appendChild(a),this.viewBoxImage=a,e){var o=e;"string"==typeof e?o=t.ownerDocument.querySelectorAll(e):e.querySelector&&(o=[e]),this.previews=o,H(o,function(t){var e=document.createElement("img");K(t,v,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),n&&(e.crossOrigin=n),e.src=i,e.alt=l,e.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(e)})}},resetPreview:function(){H(this.previews,function(t){var n=G(t,v);L(t,{width:n.width,height:n.height}),t.innerHTML=n.html,function(t,n){if(N(t[n]))try{delete t[n]}catch(e){t[n]=void 0}else if(t.dataset)try{delete t.dataset[n]}catch(e){t.dataset[n]=void 0}else t.removeAttribute("data-".concat(V(n)))}(t,v)})},preview:function(){var t=this.imageData,n=this.canvasData,e=this.cropBoxData,i=e.width,l=e.height,a=t.width,o=t.height,r=e.left-n.left-t.left,s=e.top-n.top-t.top;this.cropped&&!this.disabled&&(L(this.viewBoxImage,j({width:a,height:o},ot(j({translateX:-r,translateY:-s},t)))),H(this.previews,function(n){var e=G(n,v),u=e.width,h=e.height,c=u,p=h,d=1;i&&(p=l*(d=u/i)),l&&p>h&&(c=i*(d=h/l),p=h),L(n,{width:c,height:p}),L(n.getElementsByTagName("img")[0],j({width:a*d,height:o*d},ot(j({translateX:-r*d,translateY:-s*d},t))))}))}},dt={bind:function(){var t=this.element,n=this.options,e=this.cropper;q(n.cropstart)&&Q(t,"cropstart",n.cropstart),q(n.cropmove)&&Q(t,"cropmove",n.cropmove),q(n.cropend)&&Q(t,"cropend",n.cropend),q(n.crop)&&Q(t,"crop",n.crop),q(n.zoom)&&Q(t,"zoom",n.zoom),Q(e,w,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&Q(e,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Q(e,"dblclick",this.onDblclick=this.dblclick.bind(this)),Q(t.ownerDocument,C,this.onCropMove=this.cropMove.bind(this)),Q(t.ownerDocument,x,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&Q(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,n=this.options,e=this.cropper;q(n.cropstart)&&J(t,"cropstart",n.cropstart),q(n.cropmove)&&J(t,"cropmove",n.cropmove),q(n.cropend)&&J(t,"cropend",n.cropend),q(n.crop)&&J(t,"crop",n.crop),q(n.zoom)&&J(t,"zoom",n.zoom),J(e,w,this.onCropStart),n.zoomable&&n.zoomOnWheel&&J(e,"wheel",this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&J(e,"dblclick",this.onDblclick),J(t.ownerDocument,C,this.onCropMove),J(t.ownerDocument,x,this.onCropEnd),n.responsive&&J(window,"resize",this.onResize)}},gt={resize:function(){var t=this.options,n=this.container,e=this.containerData,i=Number(t.minContainerWidth)||200,l=Number(t.minContainerHeight)||100;if(!(this.disabled||e.width<=i||e.height<=l)){var a,o,r=n.offsetWidth/e.width;1===r&&n.offsetHeight===e.height||(t.restore&&(a=this.getCanvasData(),o=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(H(a,function(t,n){a[n]=t*r})),this.setCropBoxData(H(o,function(t,n){o[n]=t*r}))))}},dblclick:function(){var t,n;this.disabled||"none"===this.options.dragMode||this.setDragMode((n=h,((t=this.dragBox).classList?t.classList.contains(n):t.className.indexOf(n)>-1)?"move":"crop"))},wheel:function(t){var n=this,e=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*e,t)))},cropStart:function(t){var n=t.buttons,e=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(O(n)&&1!==n||O(e)&&0!==e||t.ctrlKey))){var i,l=this.options,a=this.pointers;t.changedTouches?H(t.changedTouches,function(t){a[t.identifier]=rt(t)}):a[t.pointerId||0]=rt(t),i=Object.keys(a).length>1&&l.zoomable&&l.zoomOnTouch?"zoom":G(t.target,f),y.test(i)&&!1!==tt(this.element,"cropstart",{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,"crop"===i&&(this.cropping=!0,X(this.dragBox,m)))}},cropMove:function(t){var n=this.action;if(!this.disabled&&n){var e=this.pointers;t.preventDefault(),!1!==tt(this.element,"cropmove",{originalEvent:t,action:n})&&(t.changedTouches?H(t.changedTouches,function(t){j(e[t.identifier]||{},rt(t,!0))}):j(e[t.pointerId||0]||{},rt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var n=this.action,e=this.pointers;t.changedTouches?H(t.changedTouches,function(t){delete e[t.identifier]}):delete e[t.pointerId||0],n&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,U(this.dragBox,m,this.cropped&&this.options.modal)),tt(this.element,"cropend",{originalEvent:t,action:n}))}}},mt={change:function(t){var n,e=this.canvasData,i=this.containerData,a=this.cropBoxData,o=this.pointers,r=this.action,s=this.options.aspectRatio,u=a.left,h=a.top,c=a.width,d=a.height,g=u+c,m=h+d,b=0,f=0,v=i.width,w=i.height,C=!0;!s&&t.shiftKey&&(s=c&&d?c/d:1),this.limited&&(f=a.minTop,v=(b=a.minLeft)+Math.min(i.width,e.width,e.left+e.width),w=f+Math.min(i.height,e.height,e.top+e.height));var x=o[Object.keys(o)[0]],y={x:x.endX-x.startX,y:x.endY-x.startY},M=function(t){switch(t){case"e":g+y.x>v&&(y.x=v-g);break;case"w":u+y.x<b&&(y.x=b-u);break;case"n":h+y.y<f&&(y.y=f-h);break;case"s":m+y.y>w&&(y.y=w-m)}};switch(r){case"all":u+=y.x,h+=y.y;break;case"e":if(y.x>=0&&(g>=v||s&&(h<=f||m>=w))){C=!1;break}M("e"),(c+=y.x)<0&&(r="w",u-=c=-c),s&&(h+=(a.height-(d=c/s))/2);break;case"n":if(y.y<=0&&(h<=f||s&&(u<=b||g>=v))){C=!1;break}M("n"),h+=y.y,(d-=y.y)<0&&(r="s",h-=d=-d),s&&(u+=(a.width-(c=d*s))/2);break;case"w":if(y.x<=0&&(u<=b||s&&(h<=f||m>=w))){C=!1;break}M("w"),u+=y.x,(c-=y.x)<0&&(r="e",u-=c=-c),s&&(h+=(a.height-(d=c/s))/2);break;case"s":if(y.y>=0&&(m>=w||s&&(u<=b||g>=v))){C=!1;break}M("s"),(d+=y.y)<0&&(r="n",h-=d=-d),s&&(u+=(a.width-(c=d*s))/2);break;case"ne":if(s){if(y.y<=0&&(h<=f||g>=v)){C=!1;break}M("n"),h+=y.y,c=(d-=y.y)*s}else M("n"),M("e"),y.x>=0?g<v?c+=y.x:y.y<=0&&h<=f&&(C=!1):c+=y.x,y.y<=0?h>f&&(d-=y.y,h+=y.y):(d-=y.y,h+=y.y);c<0&&d<0?(r="sw",h-=d=-d,u-=c=-c):c<0?(r="nw",u-=c=-c):d<0&&(r="se",h-=d=-d);break;case"nw":if(s){if(y.y<=0&&(h<=f||u<=b)){C=!1;break}M("n"),h+=y.y,u+=a.width-(c=(d-=y.y)*s)}else M("n"),M("w"),y.x<=0?u>b?(c-=y.x,u+=y.x):y.y<=0&&h<=f&&(C=!1):(c-=y.x,u+=y.x),y.y<=0?h>f&&(d-=y.y,h+=y.y):(d-=y.y,h+=y.y);c<0&&d<0?(r="se",h-=d=-d,u-=c=-c):c<0?(r="ne",u-=c=-c):d<0&&(r="sw",h-=d=-d);break;case"sw":if(s){if(y.x<=0&&(u<=b||m>=w)){C=!1;break}M("w"),u+=y.x,d=(c-=y.x)/s}else M("s"),M("w"),y.x<=0?u>b?(c-=y.x,u+=y.x):y.y>=0&&m>=w&&(C=!1):(c-=y.x,u+=y.x),y.y>=0?m<w&&(d+=y.y):d+=y.y;c<0&&d<0?(r="ne",h-=d=-d,u-=c=-c):c<0?(r="se",u-=c=-c):d<0&&(r="nw",h-=d=-d);break;case"se":if(s){if(y.x>=0&&(g>=v||m>=w)){C=!1;break}M("e"),d=(c+=y.x)/s}else M("s"),M("e"),y.x>=0?g<v?c+=y.x:y.y>=0&&m>=w&&(C=!1):c+=y.x,y.y>=0?m<w&&(d+=y.y):d+=y.y;c<0&&d<0?(r="nw",h-=d=-d,u-=c=-c):c<0?(r="sw",u-=c=-c):d<0&&(r="ne",h-=d=-d);break;case"move":this.move(y.x,y.y),C=!1;break;case"zoom":this.zoom(function(t){var n=l({},t),e=[];return H(t,function(t,i){delete n[i],H(n,function(n){var i=Math.abs(t.startX-n.startX),l=Math.abs(t.startY-n.startY),a=Math.abs(t.endX-n.endX),o=Math.abs(t.endY-n.endY),r=Math.sqrt(i*i+l*l),s=Math.sqrt(a*a+o*o);e.push((s-r)/r)})}),e.sort(function(t,n){return Math.abs(t)<Math.abs(n)}),e[0]}(o),t),C=!1;break;case"crop":if(!y.x||!y.y){C=!1;break}n=nt(this.cropper),u=x.startX-n.left,h=x.startY-n.top,c=a.minWidth,d=a.minHeight,y.x>0?r=y.y>0?"se":"ne":y.x<0&&(u-=c,r=y.y>0?"sw":"nw"),y.y<0&&(h-=d),this.cropped||(Y(this.cropBox,p),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}C&&(a.width=c,a.height=d,a.left=u,a.top=h,this.action=r,this.renderCropBox()),H(o,function(t){t.startX=t.endX,t.startY=t.endY})}},bt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&X(this.dragBox,m),Y(this.cropBox,p),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Y(this.dragBox,m),X(this.cropBox,p)),this},replace:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),n?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,H(this.previews,function(n){n.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Y(this.cropper,c)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,X(this.cropper,c)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.canvasData,i=e.left,l=e.top;return this.moveTo(T(t)?t:i+Number(t),T(n)?n:l+Number(n))},moveTo:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.canvasData,i=!1;return t=Number(t),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(O(t)&&(e.left=t,i=!0),O(n)&&(e.top=n,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,n){var e=this.canvasData;return t=Number(t),this.zoomTo(e.width*(t=t<0?1/(1-t):1+t)/e.naturalWidth,null,n)},zoomTo:function(t,n,e){var i=this.options,l=this.canvasData,a=l.width,o=l.height,r=l.naturalWidth,s=l.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&i.zoomable){var u=r*t,h=s*t;if(!1===tt(this.element,"zoom",{ratio:t,oldRatio:a/r,originalEvent:e}))return this;if(e){var c=this.pointers,p=nt(this.cropper),d=c&&Object.keys(c).length?function(t){var n=0,e=0,i=0;return H(t,function(t){n+=t.startX,e+=t.startY,i+=1}),{pageX:n/=i,pageY:e/=i}}(c):{pageX:e.pageX,pageY:e.pageY};l.left-=(d.pageX-p.left-l.left)/a*(u-a),l.top-=(d.pageY-p.top-l.top)/o*(h-o)}else B(n)&&O(n.x)&&O(n.y)?(l.left-=(n.x-l.left)/a*(u-a),l.top-=(n.y-l.top)/o*(h-o)):(l.left-=(u-a)/2,l.top-=(h-o)/2);l.width=u,l.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return O(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var n=this.imageData.scaleY;return this.scale(t,O(n)?n:1)},scaleY:function(t){var n=this.imageData.scaleX;return this.scale(O(n)?n:1,t)},scale:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.imageData,i=!1;return t=Number(t),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(O(t)&&(e.scaleX=t,i=!0),O(n)&&(e.scaleY=n,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.options,i=this.imageData,l=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){var o=i.width/i.naturalWidth;if(H(t={x:a.left-l.left,y:a.top-l.top,width:a.width,height:a.height},function(n,e){t[e]=n/o}),n){var r=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=r-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=i.rotate||0),e.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var n=this.options,e=this.imageData,i=this.canvasData,l={};if(this.ready&&!this.disabled&&B(t)){var a=!1;n.rotatable&&O(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,a=!0),n.scalable&&(O(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,a=!0),O(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=e.width/e.naturalWidth;O(t.x)&&(l.left=t.x*o+i.left),O(t.y)&&(l.top=t.y*o+i.top),O(t.width)&&(l.width=t.width*o),O(t.height)&&(l.height=t.height*o),this.setCropBoxData(l)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&H(["left","top","width","height","naturalWidth","naturalHeight"],function(e){n[e]=t[e]}),n},setCanvasData:function(t){var n=this.canvasData,e=n.aspectRatio;return this.ready&&!this.disabled&&B(t)&&(O(t.left)&&(n.left=t.left),O(t.top)&&(n.top=t.top),O(t.width)?(n.width=t.width,n.height=t.width/e):O(t.height)&&(n.height=t.height,n.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,n=this.cropBoxData;return this.ready&&this.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var n,e,i=this.cropBoxData,l=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&B(t)&&(O(t.left)&&(i.left=t.left),O(t.top)&&(i.top=t.top),O(t.width)&&t.width!==i.width&&(n=!0,i.width=t.width),O(t.height)&&t.height!==i.height&&(e=!0,i.height=t.height),l&&(n?i.height=i.width/l:e&&(i.width=i.height*l)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,e=function(e,i,l,o){var r=i.aspectRatio,s=i.naturalWidth,u=i.naturalHeight,h=i.rotate,c=void 0===h?0:h,p=i.scaleX,d=void 0===p?1:p,g=i.scaleY,m=void 0===g?1:g,b=n.aspectRatio,f=n.naturalWidth,v=n.naturalHeight,w=t.fillColor,C=void 0===w?"transparent":w,x=t.imageSmoothingEnabled,y=void 0===x||x,M=t.imageSmoothingQuality,z=void 0===M?"low":M,D=t.maxWidth,k=void 0===D?1/0:D,P=t.maxHeight,O=void 0===P?1/0:P,E=t.minWidth,T=void 0===E?0:E,N=t.minHeight,S=void 0===N?0:N,B=document.createElement("canvas"),q=B.getContext("2d"),W=st({aspectRatio:b,width:k,height:O}),I=st({aspectRatio:b,width:T,height:S},"cover"),H=Math.min(W.width,Math.max(I.width,f)),j=Math.min(W.height,Math.max(I.height,v)),_=st({aspectRatio:r,width:k,height:O}),A=st({aspectRatio:r,width:T,height:S},"cover"),L=Math.min(_.width,Math.max(A.width,s)),X=Math.min(_.height,Math.max(A.height,u)),Y=[-L/2,-X/2,L,X];return B.width=R(H),B.height=R(j),q.fillStyle=C,q.fillRect(0,0,H,j),q.save(),q.translate(H/2,j/2),q.rotate(c*Math.PI/180),q.scale(d,m),q.imageSmoothingEnabled=y,q.imageSmoothingQuality=z,q.drawImage.apply(q,[e].concat(a(Y.map(function(t){return Math.floor(R(t))})))),q.restore(),B}(this.image,this.imageData);if(!this.cropped)return e;var i=this.getData(),l=i.x,o=i.y,r=i.width,s=i.height,u=e.width/Math.floor(n.naturalWidth);1!==u&&(l*=u,o*=u,r*=u,s*=u);var h=r/s,c=st({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=st({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=st({aspectRatio:h,width:t.width||(1!==u?e.width:r),height:t.height||(1!==u?e.height:s)}),g=d.width,m=d.height;g=Math.min(c.width,Math.max(p.width,g)),m=Math.min(c.height,Math.max(p.height,m));var b=document.createElement("canvas"),f=b.getContext("2d");b.width=R(g),b.height=R(m),f.fillStyle=t.fillColor||"transparent",f.fillRect(0,0,g,m);var v=t.imageSmoothingEnabled,w=t.imageSmoothingQuality;f.imageSmoothingEnabled=void 0===v||v,w&&(f.imageSmoothingQuality=w);var C,x,y,M,z,D,k=e.width,P=e.height,O=l,E=o;O<=-r||O>k?(O=0,C=0,y=0,z=0):O<=0?(y=-O,O=0,z=C=Math.min(k,r+O)):O<=k&&(y=0,z=C=Math.min(r,k-O)),C<=0||E<=-s||E>P?(E=0,x=0,M=0,D=0):E<=0?(M=-E,E=0,D=x=Math.min(P,s+E)):E<=P&&(M=0,D=x=Math.min(s,P-E));var T=[O,E,C,x];if(z>0&&D>0){var N=g/r;T.push(y*N,M*N,z*N,D*N)}return f.drawImage.apply(f,[e].concat(a(T.map(function(t){return Math.floor(R(t))})))),b},setAspectRatio:function(t){var n=this.options;return this.disabled||T(t)||(n.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var n=this.options,e=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var l="crop"===t,a=n.movable&&"move"===t;n.dragMode=t=l||a?t:"none",K(e,f,t),U(e,h,l),U(e,b,a),n.cropBoxMovable||(K(i,f,t),U(i,h,l),U(i,b,a))}return this}},ft=r.Cropper,vt=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(n,e){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this),!n||!D.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=j({},k,B(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return e=t,l=[{key:"noConflict",value:function(){return window.Cropper=ft,t}},{key:"setDefaults",value:function(t){j(k,B(t)&&t)}}],(i=[{key:"init",value:function(){var t,n=this.element,e=n.tagName.toLowerCase();if(!n.cropper){if(n.cropper=this,"img"===e){if(this.isImg=!0,t=n.getAttribute("src")||"",this.originalUrl=t,!t)return;t=n.src}else"canvas"===e&&window.HTMLCanvasElement&&(t=n.toDataURL());this.load(t)}}},{key:"load",value:function(t){var n=this;if(t){this.url=t,this.imageData={};var e=this.element,i=this.options;if(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)if(M.test(t))z.test(t)?this.read((l=t.replace(ht,""),a=atob(l),o=new ArrayBuffer(a.length),H(r=new Uint8Array(o),function(t,n){r[n]=a.charCodeAt(n)}),o)):this.clone();else{var l,a,o,r,s=new XMLHttpRequest,u=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=u,s.onerror=u,s.ontimeout=u,s.onprogress=function(){"image/jpeg"!==s.getResponseHeader("content-type")&&s.abort()},s.onload=function(){n.read(s.response)},s.onloadend=function(){n.reloading=!1,n.xhr=null},i.checkCrossOrigin&&lt(t)&&e.crossOrigin&&(t=at(t)),s.open("GET",t),s.responseType="arraybuffer",s.withCredentials="use-credentials"===e.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var n=this.options,e=this.imageData,i=function(t){var n,e=new DataView(t);try{var i,l,a;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var o=e.byteLength,r=2;r+1<o;){if(255===e.getUint8(r)&&225===e.getUint8(r+1)){l=r;break}r+=1}if(l){var s=l+4,u=l+10;if("Exif"===function(t,n,e){var i="";e+=s;for(var l=s;l<e;l+=1)i+=ut(t.getUint8(l));return i}(e,0,4)){var h=e.getUint16(u);if(((i=18761===h)||19789===h)&&42===e.getUint16(u+2,i)){var c=e.getUint32(u+4,i);c>=8&&(a=u+c)}}}if(a){var p,d,g=e.getUint16(a,i);for(d=0;d<g;d+=1)if(274===e.getUint16(p=a+12*d+2,i)){n=e.getUint16(p+=8,i),e.setUint16(p,1,i);break}}}catch(m){n=1}return n}(t),l=0,a=1,o=1;if(i>1){this.url=function(t,n){for(var e=[],i=new Uint8Array(t);i.length>0;)e.push(ut.apply(null,I(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(e.join("")))}(t);var r=function(t){var n=0,e=1,i=1;switch(t){case 2:e=-1;break;case 3:n=-180;break;case 4:i=-1;break;case 5:n=90,i=-1;break;case 6:n=90;break;case 7:n=90,e=-1;break;case 8:n=-90}return{rotate:n,scaleX:e,scaleY:i}}(i);l=r.rotate,a=r.scaleX,o=r.scaleY}n.rotatable&&(e.rotate=l),n.scalable&&(e.scaleX=a,e.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,n=this.url,e=t.crossOrigin,i=n;this.options.checkCrossOrigin&&lt(n)&&(e||(e="anonymous"),i=at(n)),this.crossOrigin=e,this.crossOriginUrl=i;var l=document.createElement("img");e&&(l.crossOrigin=e),l.src=i||n,l.alt=t.alt||"The image to crop",this.image=l,l.onload=this.start.bind(this),l.onerror=this.stop.bind(this),X(l,d),t.parentNode.insertBefore(l,t.nextSibling)}},{key:"start",value:function(){var t=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var e=r.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(r.navigator.userAgent),i=function(n,e){j(t.imageData,{naturalWidth:n,naturalHeight:e,aspectRatio:n/e}),t.sizing=!1,t.sized=!0,t.build()};if(!n.naturalWidth||e){var l=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=l,l.onload=function(){i(l.width,l.height),e||a.removeChild(l)},l.src=n.src,e||(l.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(l))}else i(n.naturalWidth,n.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,n=this.options,e=this.image,i=t.parentNode,l=document.createElement("div");l.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=l.querySelector(".".concat("cropper","-container")),o=a.querySelector(".".concat("cropper","-canvas")),r=a.querySelector(".".concat("cropper","-drag-box")),s=a.querySelector(".".concat("cropper","-crop-box")),u=s.querySelector(".".concat("cropper","-face"));this.container=i,this.cropper=a,this.canvas=o,this.dragBox=r,this.cropBox=s,this.viewBox=a.querySelector(".".concat("cropper","-view-box")),this.face=u,o.appendChild(e),X(t,p),i.insertBefore(a,t.nextSibling),this.isImg||Y(e,d),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,X(s,p),n.guides||X(s.getElementsByClassName("".concat("cropper","-dashed")),p),n.center||X(s.getElementsByClassName("".concat("cropper","-center")),p),n.background&&X(a,"".concat("cropper","-bg")),n.highlight||X(u,g),n.cropBoxMovable&&(X(u,b),K(u,f,"all")),n.cropBoxResizable||(X(s.getElementsByClassName("".concat("cropper","-line")),p),X(s.getElementsByClassName("".concat("cropper","-point")),p)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),q(n.ready)&&Q(t,"ready",n.ready,{once:!0}),tt(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Y(this.element,p))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(e.prototype,i),l&&n(e,l),t;var e,i,l}();return j(vt.prototype,ct,pt,dt,gt,mt,bt),vt}()}}]);