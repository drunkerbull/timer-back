(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{nrXP:function(t,n,e){"use strict";e.r(n);var l=e("8Y7J"),i=e("s7LF"),a=e("oaey"),o=e("KJJU");class s extends a.a{constructor(t){super(),this.settingsService=t,this.formMain=new i.i({name:new i.f(""),surname:new i.f(""),nickname:new i.f(""),blockEveryoneWhoWantAddMeToProject:new i.f(""),blockEveryoneWhoWantWriteMe:new i.f(""),disableNotifications:new i.f("")}),this.formPass=new i.i({currentPass:new i.f(""),newPass:new i.f(""),repeatNewPass:new i.f("")}),this.changeAvatar=!1,this.loadedAvatar=!1,this.newBlackListUser="",this.blackList=[],this.statisticsData=null}ngOnInit(){this.formMain.patchValue(this.storageService.user),this.getBlackList(),this.getStatisticsData()}getStatisticsData(){this.settingsService.getStatisticsData().subscribe(t=>{this.statisticsData=t})}changeAvatarImg({blob:t}){const n=new FormData;n.append("avatar",t),this.loadedAvatar=!0;const e=this.settingsService.updateAvatarData(n).subscribe(n=>{this.storageService.user.haveAvatar||this.updateMain({haveAvatar:!0}),this.storageService.user.avatar=t,this.loadedAvatar=!1,this.changeAvatar=!1,this.toastr.success("Image saved")},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(e)}updateMain(t=this.formMain.value){const n=this.settingsService.updateMainData(t).subscribe(t=>{const n=new o.a(t);this.storageService.saveUser(n),this.toastr.success("Data changed")},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(n)}updatePass(){const t=this.settingsService.updatePassData(this.formPass.value).subscribe(t=>{this.toastr.success("Password changed")},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(t)}deleteMain(){const t=this.settingsService.deleteMainData().subscribe(t=>{this.toastr.success("User deleted")},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(t)}getBlackList(){const t=this.settingsService.getBlackList().subscribe(t=>{this.blackList=t.blackList,t.blackList||(this.blackList=[])},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(t)}addBlackList(){if(!this.newBlackListUser.trim().length)return void this.toastr.error("You cant send empty value");const t=this.settingsService.addBlackList(this.newBlackListUser).subscribe(t=>{this.blackList.push(t),this.toastr.info("User added to black list","Black List")},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(t)}deleteBlackList(t,n){const e=this.settingsService.deleteBlackList(t._id).subscribe(t=>{this.toastr.info(t.message,"Black List"),this.blackList.splice(n,1)},t=>this.errorHandlingService.showError(t));this.someSubscriptions.add(e)}}class r{}var u=e("pMnS"),h=e("SVse"),c=e("urRO"),d=e.n(c);class p{constructor(){this.cropper=null,this.cropped=new l.m,this.currentImg=null}onFileChange(t){this.currentImg=null,this.cropper=null;let n=new FileReader;n.onload=(t=>{this.currentImg=t.target.result,setTimeout(()=>{this.cropper=new d.a(this.image.nativeElement,{aspectRatio:1,viewMode:1})},100)}),n.readAsDataURL(t.target.files[0])}cropImg(){const t=this.cropper.getCroppedCanvas(),n=t.toDataURL("image/jpeg",.7);t.toBlob(t=>{this.cropped.emit({base64:n,blob:t})})}}var g=l.mb({encapsulation:0,styles:[[".cropper[_ngcontent-%COMP%]{padding:16px;border:1px solid red}.cropper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]],data:{}});function b(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),l.ob(1,0,[[1,0],["image",1]],null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),l.ob(2,0,null,null,1,"button",[],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.cropImg()&&l),l},null,null)),(t()(),l.Db(-1,null,["Crop"]))],null,function(t,n){t(n,1,0,n.component.currentImg)})}function m(t){return l.Eb(0,[l.Bb(671088640,1,{image:0}),(t()(),l.ob(1,0,null,null,3,"div",[["class","cropper"]],null,null,null,null,null)),(t()(),l.ob(2,0,null,null,0,"input",[["accept","image/x-png,image/png,image/gif,image/jpeg,image/jpg,image/tif,image/tiff"],["type","file"]],null,[[null,"change"]],function(t,n,e){var l=!0;return"change"===n&&(l=!1!==t.component.onFileChange(e)&&l),l},null,null)),(t()(),l.db(16777216,null,null,1,null,b)),l.nb(4,16384,null,0,h.j,[l.N,l.K],{ngIf:[0,"ngIf"]},null)],function(t,n){t(n,4,0,n.component.currentImg)},null)}var v=e("lJxs"),f=e("yTb8");const x=(()=>{class t{constructor(t){this.baseHttp=t}getMainData(){return this.baseHttp.get("/users/me").pipe(Object(v.a)(t=>t))}getStatisticsData(){return this.baseHttp.get("/statistics/me").pipe(Object(v.a)(t=>t))}updateMainData(t){return this.baseHttp.put("/users/me",t).pipe(Object(v.a)(t=>t))}updatePassData(t){return this.baseHttp.put("/users/me/pass",t).pipe(Object(v.a)(t=>t))}deleteMainData(){return this.baseHttp.delete("/users/me").pipe(Object(v.a)(t=>t))}updateAvatarData(t){return this.baseHttp.post("/users/me/avatar",t).pipe(Object(v.a)(t=>t))}getBlackList(){return this.baseHttp.get("/blacklist").pipe(Object(v.a)(t=>t))}addBlackList(t){return this.baseHttp.post("/blacklist",{nickname:t}).pipe(Object(v.a)(t=>t))}deleteBlackList(t){return this.baseHttp.delete("/blacklist/"+t).pipe(Object(v.a)(t=>t))}}return t.ngInjectableDef=l.Gb({factory:function(){return new t(l.Kb(f.a))},token:t,providedIn:"root"}),t})();var w=l.mb({encapsulation:0,styles:[['[_nghost-%COMP%]{display:flex}.left-side[_ngcontent-%COMP%]{min-width:220px;margin-right:20px;max-width:220px}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]{min-height:220px;max-height:220px;display:flex;background:#9acd32;margin-bottom:20px;padding:0;position:relative;cursor:pointer}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:100%;transition:.3s;height:100%;background:rgba(0,0,0,0);border-radius:4px}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;cursor:pointer;transition:.3s;opacity:0}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{opacity:1}.left-side[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]:hover:before{background:rgba(0,0,0,.7)}.main-side[_ngcontent-%COMP%]{width:calc(100% - 220px)}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]{display:flex;flex-flow:column}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:25%;max-width:25%;text-align:right;margin-right:16px}.main-side[_ngcontent-%COMP%]   .main-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%}.avatar-change[_ngcontent-%COMP%]{padding:0 16px;height:0;overflow:hidden;margin:0}.avatar-change.avatar-change--open[_ngcontent-%COMP%]{padding:16px;margin:20px 0;height:auto}']],data:{}});function C(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,n){t(n,0,0,n.component.storageService.user.avatar)})}function y(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,10,"div",[["class","statistics-box white-back"]],null,null,null,null,null)),(t()(),l.ob(1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Statistics"])),(t()(),l.ob(3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l.Db(4,null,["Projects with me: ",""])),(t()(),l.ob(5,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l.Db(6,null,["My Projects: ",""])),(t()(),l.ob(7,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l.Db(8,null,["Tasks with me: ",""])),(t()(),l.ob(9,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l.Db(10,null,["My Tasks: ",""]))],null,function(t,n){var e=n.component;t(n,4,0,e.statisticsData.projectsWorker),t(n,6,0,e.statisticsData.projectsOwner),t(n,8,0,e.statisticsData.tasksWorker),t(n,10,0,e.statisticsData.tasksOwner)})}function M(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),l.Db(1,null,[" "," "])),(t()(),l.ob(2,0,null,null,1,"button",[],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.deleteBlackList(t.context.$implicit,t.context.index)&&l),l},null,null)),(t()(),l.Db(-1,null,["Delete"]))],null,function(t,n){t(n,1,0,n.context.$implicit.nickname)})}function k(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),l.db(16777216,null,null,1,null,M)),l.nb(2,278528,null,0,h.i,[l.N,l.K,l.r],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.component.blackList)},null)}function D(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Yea, black list is empty! Hmm... Where Zinka Shamana?"]))],null,null)}function O(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,7,"div",[["class","left-side"]],null,null,null,null,null)),(t()(),l.ob(1,0,null,null,4,"div",[["class","avatar-box white-back"]],null,[[null,"click"]],function(t,n,e){var l=!0,i=t.component;return"click"===n&&(l=0!=(i.changeAvatar=!i.changeAvatar)&&l),l},null,null)),(t()(),l.db(16777216,null,null,1,null,C)),l.nb(3,16384,null,0,h.j,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(t()(),l.ob(4,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Change"])),(t()(),l.db(16777216,null,null,1,null,y)),l.nb(7,16384,null,0,h.j,[l.N,l.K],{ngIf:[0,"ngIf"]},null),(t()(),l.ob(8,0,null,null,129,"div",[["class","main-side"]],null,null,null,null,null)),(t()(),l.ob(9,0,null,null,5,"div",[["class","avatar-change white-back"]],null,null,null,null,null)),l.Ab(512,null,h.q,h.r,[l.r,l.s,l.k,l.C]),l.nb(11,278528,null,0,h.h,[h.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.zb(12,{"avatar-change--open":0}),(t()(),l.ob(13,0,null,null,1,"app-cropper",[],null,[[null,"cropped"]],function(t,n,e){var l=!0;return"cropped"===n&&(l=!1!==t.component.changeAvatarImg(e)&&l),l},m,g)),l.nb(14,49152,null,0,p,[],null,{cropped:"cropped"}),(t()(),l.ob(15,0,null,null,63,"div",[["class","main-inputs white-back"]],null,null,null,null,null)),(t()(),l.ob(16,0,null,null,62,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,e){var i=!0,a=t.component;return"submit"===n&&(i=!1!==l.xb(t,18).onSubmit(e)&&i),"reset"===n&&(i=!1!==l.xb(t,18).onReset()&&i),"ngSubmit"===n&&(i=!1!==a.updateMain()&&i),i},null,null)),l.nb(17,16384,null,0,i.x,[],null,null),l.nb(18,540672,null,0,i.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l.Ab(2048,null,i.c,null,[i.j]),l.nb(20,16384,null,0,i.o,[[4,i.c]],null,null),(t()(),l.ob(21,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(22,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Name:"])),(t()(),l.ob(24,0,null,null,5,"input",[["class","input"],["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0;return"input"===n&&(i=!1!==l.xb(t,25)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,25).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,25)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,25)._compositionEnd(e.target.value)&&i),i},null,null)),l.nb(25,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(27,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(29,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(30,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(31,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Surname:"])),(t()(),l.ob(33,0,null,null,5,"input",[["class","input"],["formControlName","surname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0;return"input"===n&&(i=!1!==l.xb(t,34)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,34).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,34)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,34)._compositionEnd(e.target.value)&&i),i},null,null)),l.nb(34,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(36,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(38,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(39,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(40,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Nickname:"])),(t()(),l.ob(42,0,null,null,5,"input",[["class","input"],["formControlName","nickname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0;return"input"===n&&(i=!1!==l.xb(t,43)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,43).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,43)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,43)._compositionEnd(e.target.value)&&i),i},null,null)),l.nb(43,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(45,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(47,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(48,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(49,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Block everyone who want add me to project"])),(t()(),l.ob(51,0,null,null,5,"input",[["formControlName","blockEveryoneWhoWantAddMeToProject"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(t,n,e){var i=!0;return"change"===n&&(i=!1!==l.xb(t,52).onChange(e.target.checked)&&i),"blur"===n&&(i=!1!==l.xb(t,52).onTouched()&&i),i},null,null)),l.nb(52,16384,null,0,i.b,[l.C,l.k],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.b]),l.nb(54,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(56,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(57,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),l.ob(58,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(59,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Block everyone who want write me"])),(t()(),l.ob(61,0,null,null,5,"input",[["formControlName","blockEveryoneWhoWantWriteMe"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(t,n,e){var i=!0;return"change"===n&&(i=!1!==l.xb(t,62).onChange(e.target.checked)&&i),"blur"===n&&(i=!1!==l.xb(t,62).onTouched()&&i),i},null,null)),l.nb(62,16384,null,0,i.b,[l.C,l.k],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.b]),l.nb(64,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(66,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(67,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),l.ob(68,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(69,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Disable notifications"])),(t()(),l.ob(71,0,null,null,5,"input",[["formControlName","disableNotifications"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(t,n,e){var i=!0;return"change"===n&&(i=!1!==l.xb(t,72).onChange(e.target.checked)&&i),"blur"===n&&(i=!1!==l.xb(t,72).onTouched()&&i),i},null,null)),l.nb(72,16384,null,0,i.b,[l.C,l.k],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.b]),l.nb(74,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(76,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(77,0,null,null,1,"button",[["class","btn"],["type","submit"]],null,null,null,null,null)),(t()(),l.Db(-1,null,["Save"])),(t()(),l.ob(79,0,null,null,34,"div",[["class","main-inputs white-back"]],null,null,null,null,null)),(t()(),l.ob(80,0,null,null,33,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,e){var i=!0,a=t.component;return"submit"===n&&(i=!1!==l.xb(t,82).onSubmit(e)&&i),"reset"===n&&(i=!1!==l.xb(t,82).onReset()&&i),"ngSubmit"===n&&(i=!1!==a.updatePass()&&i),i},null,null)),l.nb(81,16384,null,0,i.x,[],null,null),l.nb(82,540672,null,0,i.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l.Ab(2048,null,i.c,null,[i.j]),l.nb(84,16384,null,0,i.o,[[4,i.c]],null,null),(t()(),l.ob(85,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(86,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Current password:"])),(t()(),l.ob(88,0,null,null,5,"input",[["class","input"],["formControlName","currentPass"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0;return"input"===n&&(i=!1!==l.xb(t,89)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,89).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,89)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,89)._compositionEnd(e.target.value)&&i),i},null,null)),l.nb(89,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(91,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(93,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(94,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(95,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["New password:"])),(t()(),l.ob(97,0,null,null,5,"input",[["class","input"],["formControlName","newPass"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0;return"input"===n&&(i=!1!==l.xb(t,98)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,98).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,98)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,98)._compositionEnd(e.target.value)&&i),i},null,null)),l.nb(98,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(100,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(102,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(103,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(104,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Repeat password:"])),(t()(),l.ob(106,0,null,null,5,"input",[["class","input"],["formControlName","repeatNewPass"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0;return"input"===n&&(i=!1!==l.xb(t,107)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,107).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,107)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,107)._compositionEnd(e.target.value)&&i),i},null,null)),l.nb(107,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(109,671744,null,0,i.h,[[3,i.c],[8,null],[8,null],[6,i.l],[2,i.v]],{name:[0,"name"]},null),l.Ab(2048,null,i.m,null,[i.h]),l.nb(111,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(112,0,null,null,1,"button",[["class","btn"],["type","submit"]],null,null,null,null,null)),(t()(),l.Db(-1,null,["Save"])),(t()(),l.ob(114,0,null,null,23,"div",[["class","white-back"]],null,null,null,null,null)),(t()(),l.ob(115,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Black list:"])),(t()(),l.db(16777216,null,null,1,null,k)),l.nb(118,16384,null,0,h.j,[l.N,l.K],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),l.db(0,[["blacklistempty",2]],null,0,null,D)),(t()(),l.ob(120,0,null,null,8,"label",[],null,null,null,null,null)),(t()(),l.ob(121,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Db(-1,null,["Add:"])),(t()(),l.ob(123,0,null,null,5,"input",[["class","input"],["placeholder","Write nickname..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0,a=t.component;return"input"===n&&(i=!1!==l.xb(t,124)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l.xb(t,124).onTouched()&&i),"compositionstart"===n&&(i=!1!==l.xb(t,124)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l.xb(t,124)._compositionEnd(e.target.value)&&i),"ngModelChange"===n&&(i=!1!==(a.newBlackListUser=e)&&i),i},null,null)),l.nb(124,16384,null,0,i.d,[l.C,l.k,[2,i.a]],null,null),l.Ab(1024,null,i.l,function(t){return[t]},[i.d]),l.nb(126,671744,null,0,i.p,[[8,null],[8,null],[8,null],[6,i.l]],{model:[0,"model"]},{update:"ngModelChange"}),l.Ab(2048,null,i.m,null,[i.p]),l.nb(128,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),l.ob(129,0,null,null,1,"button",[],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.addBlackList()&&l),l},null,null)),(t()(),l.Db(-1,null,["Add User"])),(t()(),l.ob(131,0,null,null,6,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,e){var i=!0,a=t.component;return"submit"===n&&(i=!1!==l.xb(t,133).onSubmit(e)&&i),"reset"===n&&(i=!1!==l.xb(t,133).onReset()&&i),"ngSubmit"===n&&(i=!1!==a.updateMain()&&i),i},null,null)),l.nb(132,16384,null,0,i.x,[],null,null),l.nb(133,540672,null,0,i.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l.Ab(2048,null,i.c,null,[i.j]),l.nb(135,16384,null,0,i.o,[[4,i.c]],null,null),(t()(),l.ob(136,0,null,null,1,"button",[["class","btn"],["type","submit"]],null,null,null,null,null)),(t()(),l.Db(-1,null,["Save"]))],function(t,n){var e=n.component;t(n,3,0,e.storageService.user.avatar&&!e.loadedAvatar),t(n,7,0,e.statisticsData);var i=t(n,12,0,e.changeAvatar);t(n,11,0,"avatar-change white-back",i),t(n,18,0,e.formMain),t(n,27,0,"name"),t(n,36,0,"surname"),t(n,45,0,"nickname"),t(n,54,0,"blockEveryoneWhoWantAddMeToProject"),t(n,64,0,"blockEveryoneWhoWantWriteMe"),t(n,74,0,"disableNotifications"),t(n,82,0,e.formPass),t(n,91,0,"currentPass"),t(n,100,0,"newPass"),t(n,109,0,"repeatNewPass"),t(n,118,0,e.blackList.length,l.xb(n,119)),t(n,126,0,e.newBlackListUser),t(n,133,0,e.formMain)},function(t,n){t(n,16,0,l.xb(n,20).ngClassUntouched,l.xb(n,20).ngClassTouched,l.xb(n,20).ngClassPristine,l.xb(n,20).ngClassDirty,l.xb(n,20).ngClassValid,l.xb(n,20).ngClassInvalid,l.xb(n,20).ngClassPending),t(n,24,0,l.xb(n,29).ngClassUntouched,l.xb(n,29).ngClassTouched,l.xb(n,29).ngClassPristine,l.xb(n,29).ngClassDirty,l.xb(n,29).ngClassValid,l.xb(n,29).ngClassInvalid,l.xb(n,29).ngClassPending),t(n,33,0,l.xb(n,38).ngClassUntouched,l.xb(n,38).ngClassTouched,l.xb(n,38).ngClassPristine,l.xb(n,38).ngClassDirty,l.xb(n,38).ngClassValid,l.xb(n,38).ngClassInvalid,l.xb(n,38).ngClassPending),t(n,42,0,l.xb(n,47).ngClassUntouched,l.xb(n,47).ngClassTouched,l.xb(n,47).ngClassPristine,l.xb(n,47).ngClassDirty,l.xb(n,47).ngClassValid,l.xb(n,47).ngClassInvalid,l.xb(n,47).ngClassPending),t(n,51,0,l.xb(n,56).ngClassUntouched,l.xb(n,56).ngClassTouched,l.xb(n,56).ngClassPristine,l.xb(n,56).ngClassDirty,l.xb(n,56).ngClassValid,l.xb(n,56).ngClassInvalid,l.xb(n,56).ngClassPending),t(n,61,0,l.xb(n,66).ngClassUntouched,l.xb(n,66).ngClassTouched,l.xb(n,66).ngClassPristine,l.xb(n,66).ngClassDirty,l.xb(n,66).ngClassValid,l.xb(n,66).ngClassInvalid,l.xb(n,66).ngClassPending),t(n,71,0,l.xb(n,76).ngClassUntouched,l.xb(n,76).ngClassTouched,l.xb(n,76).ngClassPristine,l.xb(n,76).ngClassDirty,l.xb(n,76).ngClassValid,l.xb(n,76).ngClassInvalid,l.xb(n,76).ngClassPending),t(n,80,0,l.xb(n,84).ngClassUntouched,l.xb(n,84).ngClassTouched,l.xb(n,84).ngClassPristine,l.xb(n,84).ngClassDirty,l.xb(n,84).ngClassValid,l.xb(n,84).ngClassInvalid,l.xb(n,84).ngClassPending),t(n,88,0,l.xb(n,93).ngClassUntouched,l.xb(n,93).ngClassTouched,l.xb(n,93).ngClassPristine,l.xb(n,93).ngClassDirty,l.xb(n,93).ngClassValid,l.xb(n,93).ngClassInvalid,l.xb(n,93).ngClassPending),t(n,97,0,l.xb(n,102).ngClassUntouched,l.xb(n,102).ngClassTouched,l.xb(n,102).ngClassPristine,l.xb(n,102).ngClassDirty,l.xb(n,102).ngClassValid,l.xb(n,102).ngClassInvalid,l.xb(n,102).ngClassPending),t(n,106,0,l.xb(n,111).ngClassUntouched,l.xb(n,111).ngClassTouched,l.xb(n,111).ngClassPristine,l.xb(n,111).ngClassDirty,l.xb(n,111).ngClassValid,l.xb(n,111).ngClassInvalid,l.xb(n,111).ngClassPending),t(n,123,0,l.xb(n,128).ngClassUntouched,l.xb(n,128).ngClassTouched,l.xb(n,128).ngClassPristine,l.xb(n,128).ngClassDirty,l.xb(n,128).ngClassValid,l.xb(n,128).ngClassInvalid,l.xb(n,128).ngClassPending),t(n,131,0,l.xb(n,135).ngClassUntouched,l.xb(n,135).ngClassTouched,l.xb(n,135).ngClassPristine,l.xb(n,135).ngClassDirty,l.xb(n,135).ngClassValid,l.xb(n,135).ngClassInvalid,l.xb(n,135).ngClassPending)})}function P(t){return l.Eb(0,[(t()(),l.ob(0,0,null,null,1,"app-settings",[],null,null,null,O,w)),l.nb(1,245760,null,0,s,[x],null,null)],function(t,n){t(n,1,0)},null)}var S=l.kb("app-settings",s,P,{},{},[]),B=e("IheW"),E=e("fbMX"),T=e("iInd"),N=e("XPwU"),A=e("tHmd"),L=e("NHGN"),W=e("EApP"),H=e("hrfs"),I=e("MNke"),j=e("PCNd");class _{}e.d(n,"SettingsRoutingModuleNgFactory",function(){return R});var R=l.lb(r,[],function(t){return l.ub([l.vb(512,l.j,l.Y,[[8,[u.a,S]],[3,l.j],l.w]),l.vb(4608,h.l,h.k,[l.t,[2,h.t]]),l.vb(4608,i.u,i.u,[]),l.vb(4608,B.h,B.n,[h.c,l.A,B.l]),l.vb(4608,B.o,B.o,[B.h,B.m]),l.vb(4608,E.a,E.a,[T.o]),l.vb(4608,B.k,B.k,[]),l.vb(6144,B.i,null,[B.k]),l.vb(4608,B.g,B.g,[B.i]),l.vb(6144,B.b,null,[B.g]),l.vb(4608,B.f,B.j,[B.b,l.q]),l.vb(4608,B.c,B.c,[B.f]),l.vb(5120,B.a,function(t,n,e,l,i){return[t,new N.a(n,e,l,i)]},[B.o,E.a,T.o,T.a,B.c]),l.vb(4608,i.e,i.e,[]),l.vb(4608,A.g,A.d,[B.c]),l.vb(5120,A.f,A.c,[[3,A.f],A.g,l.A,[2,A.b],[2,h.c]]),l.vb(4608,f.a,f.a,[B.c]),l.vb(4608,L.a,L.a,[W.j,E.a]),l.vb(1073742336,T.q,T.q,[[2,T.v],[2,T.o]]),l.vb(1073742336,h.b,h.b,[]),l.vb(1073742336,i.t,i.t,[]),l.vb(1073742336,i.k,i.k,[]),l.vb(1073742336,B.e,B.e,[]),l.vb(1073742336,B.d,B.d,[]),l.vb(1073742336,i.r,i.r,[]),l.vb(1073742336,H.b,H.b,[]),l.vb(1073742336,A.a,A.a,[]),l.vb(1073742336,I.b,I.b,[]),l.vb(1073742336,j.a,j.a,[]),l.vb(1073742336,_,_,[]),l.vb(1073742336,r,r,[]),l.vb(256,B.l,"XSRF-TOKEN",[]),l.vb(256,B.m,"X-XSRF-TOKEN",[]),l.vb(1024,T.m,function(){return[[{path:"",component:s}]]},[])])})},urRO:function(t,n,e){t.exports=function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){for(var e=0;e<n.length;e++){var l=n[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function e(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,l)}return e}function i(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?l(i,!0).forEach(function(n){e(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(i).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function a(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="undefined"!=typeof window&&void 0!==window.document,s=o?window:{},r=!!o&&"ontouchstart"in s.document.documentElement,u=!!o&&"PointerEvent"in s,h="".concat("cropper","-crop"),c="".concat("cropper","-disabled"),d="".concat("cropper","-hidden"),p="".concat("cropper","-hide"),g="".concat("cropper","-invisible"),b="".concat("cropper","-modal"),m="".concat("cropper","-move"),v="".concat("cropper","Action"),f="".concat("cropper","Preview"),x=u?"pointerdown":r?"touchstart":"mousedown",w=u?"pointermove":r?"touchmove":"mousemove",C=u?"pointerup pointercancel":r?"touchend touchcancel":"mouseup",y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,M=/^data:/,k=/^data:image\/jpeg;base64,/,D=/^img|canvas$/i,O={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},P=Number.isNaN||s.isNaN;function S(t){return"number"==typeof t&&!P(t)}var B=function(t){return t>0&&t<1/0};function E(t){return void 0===t}function T(n){return"object"===t(n)&&null!==n}var N=Object.prototype.hasOwnProperty;function A(t){if(!T(t))return!1;try{var n=t.constructor,e=n.prototype;return n&&e&&N.call(e,"isPrototypeOf")}catch(l){return!1}}function L(t){return"function"==typeof t}var W=Array.prototype.slice;function H(t){return Array.from?Array.from(t):W.call(t)}function I(t,n){return t&&L(n)&&(Array.isArray(t)||S(t.length)?H(t).forEach(function(e,l){n.call(t,e,l,t)}):T(t)&&Object.keys(t).forEach(function(e){n.call(t,t[e],e,t)})),t}var j=Object.assign||function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),l=1;l<n;l++)e[l-1]=arguments[l];return T(t)&&e.length>0&&e.forEach(function(n){T(n)&&Object.keys(n).forEach(function(e){t[e]=n[e]})}),t},_=/\.\d*(?:0|9){12}\d*$/;function R(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return _.test(t)?Math.round(t*n)/n:t}var z=/^width|height|left|top|marginLeft|marginTop$/;function X(t,n){var e=t.style;I(n,function(t,n){z.test(n)&&S(t)&&(t="".concat(t,"px")),e[n]=t})}function Y(t,n){if(n)if(S(t.length))I(t,function(t){Y(t,n)});else if(t.classList)t.classList.add(n);else{var e=t.className.trim();e?e.indexOf(n)<0&&(t.className="".concat(e," ").concat(n)):t.className=n}}function U(t,n){n&&(S(t.length)?I(t,function(t){U(t,n)}):t.classList?t.classList.remove(n):t.className.indexOf(n)>=0&&(t.className=t.className.replace(n,"")))}function q(t,n,e){n&&(S(t.length)?I(t,function(t){q(t,n,e)}):e?Y(t,n):U(t,n))}var V=/([a-z\d])([A-Z])/g;function K(t){return t.replace(V,"$1-$2").toLowerCase()}function F(t,n){return T(t[n])?t[n]:t.dataset?t.dataset[n]:t.getAttribute("data-".concat(K(n)))}function $(t,n,e){T(e)?t[n]=e:t.dataset?t.dataset[n]=e:t.setAttribute("data-".concat(K(n)),e)}var J=/\s\s*/,Q=function(){var t=!1;if(o){var n=!1,e=function(){},l=Object.defineProperty({},"once",{get:function(){return t=!0,n},set:function(t){n=t}});s.addEventListener("test",e,l),s.removeEventListener("test",e,l)}return t}();function Z(t,n,e){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e;n.trim().split(J).forEach(function(n){if(!Q){var a=t.listeners;a&&a[n]&&a[n][e]&&(i=a[n][e],delete a[n][e],0===Object.keys(a[n]).length&&delete a[n],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(n,i,l)})}function G(t,n,e){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e;n.trim().split(J).forEach(function(n){if(l.once&&!Q){var a=t.listeners,o=void 0===a?{}:a;i=function(){delete o[n][e],t.removeEventListener(n,i,l);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];e.apply(t,s)},o[n]||(o[n]={}),o[n][e]&&t.removeEventListener(n,o[n][e],l),o[n][e]=i,t.listeners=o}t.addEventListener(n,i,l)})}function tt(t,n,e){var l;return L(Event)&&L(CustomEvent)?l=new CustomEvent(n,{detail:e,bubbles:!0,cancelable:!0}):(l=document.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,e),t.dispatchEvent(l)}function nt(t){var n=t.getBoundingClientRect();return{left:n.left+(window.pageXOffset-document.documentElement.clientLeft),top:n.top+(window.pageYOffset-document.documentElement.clientTop)}}var et=s.location,lt=/^(\w+:)\/\/([^:\/?#]*):?(\d*)/i;function it(t){var n=t.match(lt);return null!==n&&(n[1]!==et.protocol||n[2]!==et.hostname||n[3]!==et.port)}function at(t){var n="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+n}function ot(t){var n=t.rotate,e=t.scaleX,l=t.scaleY,i=t.translateX,a=t.translateY,o=[];S(i)&&0!==i&&o.push("translateX(".concat(i,"px)")),S(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),S(n)&&0!==n&&o.push("rotate(".concat(n,"deg)")),S(e)&&1!==e&&o.push("scaleX(".concat(e,")")),S(l)&&1!==l&&o.push("scaleY(".concat(l,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function st(t,n){var e=t.pageX,l=t.pageY,a={endX:e,endY:l};return n?a:i({startX:e,startY:l},a)}function rt(t){var n=t.aspectRatio,e=t.height,l=t.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=B(l),o=B(e);if(a&&o){var s=e*n;"contain"===i&&s>l||"cover"===i&&s<l?e=l/n:l=e*n}else a?e=l/n:o&&(l=e*n);return{width:l,height:e}}var ut=String.fromCharCode,ht=/^data:.*,/,ct={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,n=this.options,e=this.container,l=this.cropper;Y(l,d),U(t,d);var i={width:Math.max(e.offsetWidth,Number(n.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(n.minContainerHeight)||100)};this.containerData=i,X(l,{width:i.width,height:i.height}),Y(t,d),U(l,d)},initCanvas:function(){var t=this.containerData,n=this.imageData,e=this.options.viewMode,l=Math.abs(n.rotate)%180==90,i=l?n.naturalHeight:n.naturalWidth,a=l?n.naturalWidth:n.naturalHeight,o=i/a,s=t.width,r=t.height;t.height*o>t.width?3===e?s=t.height*o:r=t.width/o:3===e?r=t.width/o:s=t.height*o;var u={aspectRatio:o,naturalWidth:i,naturalHeight:a,width:s,height:r};u.left=(t.width-s)/2,u.top=(t.height-r)/2,u.oldLeft=u.left,u.oldTop=u.top,this.canvasData=u,this.limited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImageData=j({},n),this.initialCanvasData=j({},u)},limitCanvas:function(t,n){var e=this.options,l=this.containerData,i=this.canvasData,a=this.cropBoxData,o=e.viewMode,s=i.aspectRatio,r=this.cropped&&a;if(t){var u=Number(e.minCanvasWidth)||0,h=Number(e.minCanvasHeight)||0;o>1?(u=Math.max(u,l.width),h=Math.max(h,l.height),3===o&&(h*s>u?u=h*s:h=u/s)):o>0&&(u?u=Math.max(u,r?a.width:0):h?h=Math.max(h,r?a.height:0):r&&((h=a.height)*s>(u=a.width)?u=h*s:h=u/s));var c=rt({aspectRatio:s,width:u,height:h});h=c.height,i.minWidth=u=c.width,i.minHeight=h,i.maxWidth=1/0,i.maxHeight=1/0}if(n)if(o>(r?0:1)){var d=l.width-i.width,p=l.height-i.height;i.minLeft=Math.min(0,d),i.minTop=Math.min(0,p),i.maxLeft=Math.max(0,d),i.maxTop=Math.max(0,p),r&&this.limited&&(i.minLeft=Math.min(a.left,a.left+(a.width-i.width)),i.minTop=Math.min(a.top,a.top+(a.height-i.height)),i.maxLeft=a.left,i.maxTop=a.top,2===o&&(i.width>=l.width&&(i.minLeft=Math.min(0,d),i.maxLeft=Math.max(0,d)),i.height>=l.height&&(i.minTop=Math.min(0,p),i.maxTop=Math.max(0,p))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=l.width,i.maxTop=l.height},renderCanvas:function(t,n){var e=this.canvasData,l=this.imageData;if(n){var i=function(t){var n=t.width,e=t.height,l=t.degree;if(90==(l=Math.abs(l)%180))return{width:e,height:n};var i=l%90*Math.PI/180,a=Math.sin(i),o=Math.cos(i),s=n*o+e*a,r=n*a+e*o;return l>90?{width:r,height:s}:{width:s,height:r}}({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),a=i.width,o=i.height,s=e.width*(a/e.naturalWidth),r=e.height*(o/e.naturalHeight);e.left-=(s-e.width)/2,e.top-=(r-e.height)/2,e.width=s,e.height=r,e.aspectRatio=a/o,e.naturalWidth=a,e.naturalHeight=o,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,X(this.canvas,j({width:e.width,height:e.height},ot({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var n=this.canvasData,e=this.imageData,l=e.naturalWidth*(n.width/n.naturalWidth),i=e.naturalHeight*(n.height/n.naturalHeight);j(e,{width:l,height:i,left:(n.width-l)/2,top:(n.height-i)/2}),X(this.image,j({width:e.width,height:e.height},ot(j({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,n=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,i={width:n.width,height:n.height};e&&(n.height*e>n.width?i.height=i.width/e:i.width=i.height*e),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*l),i.height=Math.max(i.minHeight,i.height*l),i.left=n.left+(n.width-i.width)/2,i.top=n.top+(n.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=j({},i)},limitCropBox:function(t,n){var e=this.options,l=this.containerData,i=this.canvasData,a=this.cropBoxData,o=this.limited,s=e.aspectRatio;if(t){var r=Number(e.minCropBoxWidth)||0,u=Number(e.minCropBoxHeight)||0,h=o?Math.min(l.width,i.width,i.width+i.left,l.width-i.left):l.width,c=o?Math.min(l.height,i.height,i.height+i.top,l.height-i.top):l.height;r=Math.min(r,l.width),u=Math.min(u,l.height),s&&(r&&u?u*s>r?u=r/s:r=u*s:r?u=r/s:u&&(r=u*s),c*s>h?c=h/s:h=c*s),a.minWidth=Math.min(r,h),a.minHeight=Math.min(u,c),a.maxWidth=h,a.maxHeight=c}n&&(o?(a.minLeft=Math.max(0,i.left),a.minTop=Math.max(0,i.top),a.maxLeft=Math.min(l.width,i.left+i.width)-a.width,a.maxTop=Math.min(l.height,i.top+i.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=l.width-a.width,a.maxTop=l.height-a.height))},renderCropBox:function(){var t=this.options,n=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&$(this.face,v,e.width>=n.width&&e.height>=n.height?"move":"all"),X(this.cropBox,j({width:e.width,height:e.height},ot({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),tt(this.element,"crop",this.getData())}},dt={initPreview:function(){var t=this.element,n=this.crossOrigin,e=this.options.preview,l=n?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",a=document.createElement("img");if(n&&(a.crossOrigin=n),a.src=l,a.alt=i,this.viewBox.appendChild(a),this.viewBoxImage=a,e){var o=e;"string"==typeof e?o=t.ownerDocument.querySelectorAll(e):e.querySelector&&(o=[e]),this.previews=o,I(o,function(t){var e=document.createElement("img");$(t,f,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),n&&(e.crossOrigin=n),e.src=l,e.alt=i,e.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(e)})}},resetPreview:function(){I(this.previews,function(t){var n=F(t,f);X(t,{width:n.width,height:n.height}),t.innerHTML=n.html,function(t,n){if(T(t[n]))try{delete t[n]}catch(e){t[n]=void 0}else if(t.dataset)try{delete t.dataset[n]}catch(e){t.dataset[n]=void 0}else t.removeAttribute("data-".concat(K(n)))}(t,f)})},preview:function(){var t=this.imageData,n=this.canvasData,e=this.cropBoxData,l=e.width,i=e.height,a=t.width,o=t.height,s=e.left-n.left-t.left,r=e.top-n.top-t.top;this.cropped&&!this.disabled&&(X(this.viewBoxImage,j({width:a,height:o},ot(j({translateX:-s,translateY:-r},t)))),I(this.previews,function(n){var e=F(n,f),u=e.width,h=e.height,c=u,d=h,p=1;l&&(d=i*(p=u/l)),i&&d>h&&(c=l*(p=h/i),d=h),X(n,{width:c,height:d}),X(n.getElementsByTagName("img")[0],j({width:a*p,height:o*p},ot(j({translateX:-s*p,translateY:-r*p},t))))}))}},pt={bind:function(){var t=this.element,n=this.options,e=this.cropper;L(n.cropstart)&&G(t,"cropstart",n.cropstart),L(n.cropmove)&&G(t,"cropmove",n.cropmove),L(n.cropend)&&G(t,"cropend",n.cropend),L(n.crop)&&G(t,"crop",n.crop),L(n.zoom)&&G(t,"zoom",n.zoom),G(e,x,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&G(e,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&G(e,"dblclick",this.onDblclick=this.dblclick.bind(this)),G(t.ownerDocument,w,this.onCropMove=this.cropMove.bind(this)),G(t.ownerDocument,C,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&G(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,n=this.options,e=this.cropper;L(n.cropstart)&&Z(t,"cropstart",n.cropstart),L(n.cropmove)&&Z(t,"cropmove",n.cropmove),L(n.cropend)&&Z(t,"cropend",n.cropend),L(n.crop)&&Z(t,"crop",n.crop),L(n.zoom)&&Z(t,"zoom",n.zoom),Z(e,x,this.onCropStart),n.zoomable&&n.zoomOnWheel&&Z(e,"wheel",this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Z(e,"dblclick",this.onDblclick),Z(t.ownerDocument,w,this.onCropMove),Z(t.ownerDocument,C,this.onCropEnd),n.responsive&&Z(window,"resize",this.onResize)}},gt={resize:function(){var t=this.options,n=this.container,e=this.containerData,l=Number(t.minContainerWidth)||200,i=Number(t.minContainerHeight)||100;if(!(this.disabled||e.width<=l||e.height<=i)){var a,o,s=n.offsetWidth/e.width;1===s&&n.offsetHeight===e.height||(t.restore&&(a=this.getCanvasData(),o=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(I(a,function(t,n){a[n]=t*s})),this.setCropBoxData(I(o,function(t,n){o[n]=t*s}))))}},dblclick:function(){var t,n;this.disabled||"none"===this.options.dragMode||this.setDragMode((n=h,((t=this.dragBox).classList?t.classList.contains(n):t.className.indexOf(n)>-1)?"move":"crop"))},wheel:function(t){var n=this,e=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*e,t)))},cropStart:function(t){var n=t.buttons,e=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(S(n)&&1!==n||S(e)&&0!==e||t.ctrlKey))){var l,i=this.options,a=this.pointers;t.changedTouches?I(t.changedTouches,function(t){a[t.identifier]=st(t)}):a[t.pointerId||0]=st(t),l=Object.keys(a).length>1&&i.zoomable&&i.zoomOnTouch?"zoom":F(t.target,v),y.test(l)&&!1!==tt(this.element,"cropstart",{originalEvent:t,action:l})&&(t.preventDefault(),this.action=l,this.cropping=!1,"crop"===l&&(this.cropping=!0,Y(this.dragBox,b)))}},cropMove:function(t){var n=this.action;if(!this.disabled&&n){var e=this.pointers;t.preventDefault(),!1!==tt(this.element,"cropmove",{originalEvent:t,action:n})&&(t.changedTouches?I(t.changedTouches,function(t){j(e[t.identifier]||{},st(t,!0))}):j(e[t.pointerId||0]||{},st(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var n=this.action,e=this.pointers;t.changedTouches?I(t.changedTouches,function(t){delete e[t.identifier]}):delete e[t.pointerId||0],n&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,q(this.dragBox,b,this.cropped&&this.options.modal)),tt(this.element,"cropend",{originalEvent:t,action:n}))}}},bt={change:function(t){var n,e=this.canvasData,l=this.containerData,a=this.cropBoxData,o=this.pointers,s=this.action,r=this.options.aspectRatio,u=a.left,h=a.top,c=a.width,p=a.height,g=u+c,b=h+p,m=0,v=0,f=l.width,x=l.height,w=!0;!r&&t.shiftKey&&(r=c&&p?c/p:1),this.limited&&(v=a.minTop,f=(m=a.minLeft)+Math.min(l.width,e.width,e.left+e.width),x=v+Math.min(l.height,e.height,e.top+e.height));var C=o[Object.keys(o)[0]],y={x:C.endX-C.startX,y:C.endY-C.startY},M=function(t){switch(t){case"e":g+y.x>f&&(y.x=f-g);break;case"w":u+y.x<m&&(y.x=m-u);break;case"n":h+y.y<v&&(y.y=v-h);break;case"s":b+y.y>x&&(y.y=x-b)}};switch(s){case"all":u+=y.x,h+=y.y;break;case"e":if(y.x>=0&&(g>=f||r&&(h<=v||b>=x))){w=!1;break}M("e"),(c+=y.x)<0&&(s="w",u-=c=-c),r&&(h+=(a.height-(p=c/r))/2);break;case"n":if(y.y<=0&&(h<=v||r&&(u<=m||g>=f))){w=!1;break}M("n"),h+=y.y,(p-=y.y)<0&&(s="s",h-=p=-p),r&&(u+=(a.width-(c=p*r))/2);break;case"w":if(y.x<=0&&(u<=m||r&&(h<=v||b>=x))){w=!1;break}M("w"),u+=y.x,(c-=y.x)<0&&(s="e",u-=c=-c),r&&(h+=(a.height-(p=c/r))/2);break;case"s":if(y.y>=0&&(b>=x||r&&(u<=m||g>=f))){w=!1;break}M("s"),(p+=y.y)<0&&(s="n",h-=p=-p),r&&(u+=(a.width-(c=p*r))/2);break;case"ne":if(r){if(y.y<=0&&(h<=v||g>=f)){w=!1;break}M("n"),h+=y.y,c=(p-=y.y)*r}else M("n"),M("e"),y.x>=0?g<f?c+=y.x:y.y<=0&&h<=v&&(w=!1):c+=y.x,y.y<=0?h>v&&(p-=y.y,h+=y.y):(p-=y.y,h+=y.y);c<0&&p<0?(s="sw",h-=p=-p,u-=c=-c):c<0?(s="nw",u-=c=-c):p<0&&(s="se",h-=p=-p);break;case"nw":if(r){if(y.y<=0&&(h<=v||u<=m)){w=!1;break}M("n"),h+=y.y,u+=a.width-(c=(p-=y.y)*r)}else M("n"),M("w"),y.x<=0?u>m?(c-=y.x,u+=y.x):y.y<=0&&h<=v&&(w=!1):(c-=y.x,u+=y.x),y.y<=0?h>v&&(p-=y.y,h+=y.y):(p-=y.y,h+=y.y);c<0&&p<0?(s="se",h-=p=-p,u-=c=-c):c<0?(s="ne",u-=c=-c):p<0&&(s="sw",h-=p=-p);break;case"sw":if(r){if(y.x<=0&&(u<=m||b>=x)){w=!1;break}M("w"),u+=y.x,p=(c-=y.x)/r}else M("s"),M("w"),y.x<=0?u>m?(c-=y.x,u+=y.x):y.y>=0&&b>=x&&(w=!1):(c-=y.x,u+=y.x),y.y>=0?b<x&&(p+=y.y):p+=y.y;c<0&&p<0?(s="ne",h-=p=-p,u-=c=-c):c<0?(s="se",u-=c=-c):p<0&&(s="nw",h-=p=-p);break;case"se":if(r){if(y.x>=0&&(g>=f||b>=x)){w=!1;break}M("e"),p=(c+=y.x)/r}else M("s"),M("e"),y.x>=0?g<f?c+=y.x:y.y>=0&&b>=x&&(w=!1):c+=y.x,y.y>=0?b<x&&(p+=y.y):p+=y.y;c<0&&p<0?(s="nw",h-=p=-p,u-=c=-c):c<0?(s="sw",u-=c=-c):p<0&&(s="ne",h-=p=-p);break;case"move":this.move(y.x,y.y),w=!1;break;case"zoom":this.zoom(function(t){var n=i({},t),e=[];return I(t,function(t,l){delete n[l],I(n,function(n){var l=Math.abs(t.startX-n.startX),i=Math.abs(t.startY-n.startY),a=Math.abs(t.endX-n.endX),o=Math.abs(t.endY-n.endY),s=Math.sqrt(l*l+i*i),r=Math.sqrt(a*a+o*o);e.push((r-s)/s)})}),e.sort(function(t,n){return Math.abs(t)<Math.abs(n)}),e[0]}(o),t),w=!1;break;case"crop":if(!y.x||!y.y){w=!1;break}n=nt(this.cropper),u=C.startX-n.left,h=C.startY-n.top,c=a.minWidth,p=a.minHeight,y.x>0?s=y.y>0?"se":"ne":y.x<0&&(u-=c,s=y.y>0?"sw":"nw"),y.y<0&&(h-=p),this.cropped||(U(this.cropBox,d),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(a.width=c,a.height=p,a.left=u,a.top=h,this.action=s,this.renderCropBox()),I(o,function(t){t.startX=t.endX,t.startY=t.endY})}},mt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Y(this.dragBox,b),U(this.cropBox,d),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),U(this.dragBox,b),Y(this.cropBox,d)),this},replace:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),n?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,I(this.previews,function(n){n.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,U(this.cropper,c)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Y(this.cropper,c)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.canvasData,l=e.left,i=e.top;return this.moveTo(E(t)?t:l+Number(t),E(n)?n:i+Number(n))},moveTo:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.canvasData,l=!1;return t=Number(t),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(S(t)&&(e.left=t,l=!0),S(n)&&(e.top=n,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,n){var e=this.canvasData;return t=Number(t),this.zoomTo(e.width*(t=t<0?1/(1-t):1+t)/e.naturalWidth,null,n)},zoomTo:function(t,n,e){var l=this.options,i=this.canvasData,a=i.width,o=i.height,s=i.naturalWidth,r=i.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&l.zoomable){var u=s*t,h=r*t;if(!1===tt(this.element,"zoom",{ratio:t,oldRatio:a/s,originalEvent:e}))return this;if(e){var c=this.pointers,d=nt(this.cropper),p=c&&Object.keys(c).length?function(t){var n=0,e=0,l=0;return I(t,function(t){n+=t.startX,e+=t.startY,l+=1}),{pageX:n/=l,pageY:e/=l}}(c):{pageX:e.pageX,pageY:e.pageY};i.left-=(p.pageX-d.left-i.left)/a*(u-a),i.top-=(p.pageY-d.top-i.top)/o*(h-o)}else A(n)&&S(n.x)&&S(n.y)?(i.left-=(n.x-i.left)/a*(u-a),i.top-=(n.y-i.top)/o*(h-o)):(i.left-=(u-a)/2,i.top-=(h-o)/2);i.width=u,i.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return S(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var n=this.imageData.scaleY;return this.scale(t,S(n)?n:1)},scaleY:function(t){var n=this.imageData.scaleX;return this.scale(S(n)?n:1,t)},scale:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e=this.imageData,l=!1;return t=Number(t),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(S(t)&&(e.scaleX=t,l=!0),S(n)&&(e.scaleY=n,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.options,l=this.imageData,i=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){var o=l.width/l.naturalWidth;if(I(t={x:a.left-i.left,y:a.top-i.top,width:a.width,height:a.height},function(n,e){t[e]=n/o}),n){var s=Math.round(t.y+t.height),r=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=r-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=l.rotate||0),e.scalable&&(t.scaleX=l.scaleX||1,t.scaleY=l.scaleY||1),t},setData:function(t){var n=this.options,e=this.imageData,l=this.canvasData,i={};if(this.ready&&!this.disabled&&A(t)){var a=!1;n.rotatable&&S(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,a=!0),n.scalable&&(S(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,a=!0),S(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=e.width/e.naturalWidth;S(t.x)&&(i.left=t.x*o+l.left),S(t.y)&&(i.top=t.y*o+l.top),S(t.width)&&(i.width=t.width*o),S(t.height)&&(i.height=t.height*o),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&I(["left","top","width","height","naturalWidth","naturalHeight"],function(e){n[e]=t[e]}),n},setCanvasData:function(t){var n=this.canvasData,e=n.aspectRatio;return this.ready&&!this.disabled&&A(t)&&(S(t.left)&&(n.left=t.left),S(t.top)&&(n.top=t.top),S(t.width)?(n.width=t.width,n.height=t.width/e):S(t.height)&&(n.height=t.height,n.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,n=this.cropBoxData;return this.ready&&this.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var n,e,l=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&A(t)&&(S(t.left)&&(l.left=t.left),S(t.top)&&(l.top=t.top),S(t.width)&&t.width!==l.width&&(n=!0,l.width=t.width),S(t.height)&&t.height!==l.height&&(e=!0,l.height=t.height),i&&(n?l.height=l.width/i:e&&(l.width=l.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,e=function(e,l,i,o){var s=l.aspectRatio,r=l.naturalWidth,u=l.naturalHeight,h=l.rotate,c=void 0===h?0:h,d=l.scaleX,p=void 0===d?1:d,g=l.scaleY,b=void 0===g?1:g,m=n.aspectRatio,v=n.naturalWidth,f=n.naturalHeight,x=t.fillColor,w=void 0===x?"transparent":x,C=t.imageSmoothingEnabled,y=void 0===C||C,M=t.imageSmoothingQuality,k=void 0===M?"low":M,D=t.maxWidth,O=void 0===D?1/0:D,P=t.maxHeight,S=void 0===P?1/0:P,B=t.minWidth,E=void 0===B?0:B,T=t.minHeight,N=void 0===T?0:T,A=document.createElement("canvas"),L=A.getContext("2d"),W=rt({aspectRatio:m,width:O,height:S}),H=rt({aspectRatio:m,width:E,height:N},"cover"),I=Math.min(W.width,Math.max(H.width,v)),j=Math.min(W.height,Math.max(H.height,f)),_=rt({aspectRatio:s,width:O,height:S}),z=rt({aspectRatio:s,width:E,height:N},"cover"),X=Math.min(_.width,Math.max(z.width,r)),Y=Math.min(_.height,Math.max(z.height,u)),U=[-X/2,-Y/2,X,Y];return A.width=R(I),A.height=R(j),L.fillStyle=w,L.fillRect(0,0,I,j),L.save(),L.translate(I/2,j/2),L.rotate(c*Math.PI/180),L.scale(p,b),L.imageSmoothingEnabled=y,L.imageSmoothingQuality=k,L.drawImage.apply(L,[e].concat(a(U.map(function(t){return Math.floor(R(t))})))),L.restore(),A}(this.image,this.imageData);if(!this.cropped)return e;var l=this.getData(),i=l.x,o=l.y,s=l.width,r=l.height,u=e.width/Math.floor(n.naturalWidth);1!==u&&(i*=u,o*=u,s*=u,r*=u);var h=s/r,c=rt({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=rt({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=rt({aspectRatio:h,width:t.width||(1!==u?e.width:s),height:t.height||(1!==u?e.height:r)}),g=p.width,b=p.height;g=Math.min(c.width,Math.max(d.width,g)),b=Math.min(c.height,Math.max(d.height,b));var m=document.createElement("canvas"),v=m.getContext("2d");m.width=R(g),m.height=R(b),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,g,b);var f=t.imageSmoothingEnabled,x=t.imageSmoothingQuality;v.imageSmoothingEnabled=void 0===f||f,x&&(v.imageSmoothingQuality=x);var w,C,y,M,k,D,O=e.width,P=e.height,S=i,B=o;S<=-s||S>O?(S=0,w=0,y=0,k=0):S<=0?(y=-S,S=0,k=w=Math.min(O,s+S)):S<=O&&(y=0,k=w=Math.min(s,O-S)),w<=0||B<=-r||B>P?(B=0,C=0,M=0,D=0):B<=0?(M=-B,B=0,D=C=Math.min(P,r+B)):B<=P&&(M=0,D=C=Math.min(r,P-B));var E=[S,B,w,C];if(k>0&&D>0){var T=g/s;E.push(y*T,M*T,k*T,D*T)}return v.drawImage.apply(v,[e].concat(a(E.map(function(t){return Math.floor(R(t))})))),m},setAspectRatio:function(t){var n=this.options;return this.disabled||E(t)||(n.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var n=this.options,e=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var i="crop"===t,a=n.movable&&"move"===t;n.dragMode=t=i||a?t:"none",$(e,v,t),q(e,h,i),q(e,m,a),n.cropBoxMovable||($(l,v,t),q(l,h,i),q(l,m,a))}return this}},vt=s.Cropper,ft=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(n,e){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this),!n||!D.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=j({},O,A(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return e=t,i=[{key:"noConflict",value:function(){return window.Cropper=vt,t}},{key:"setDefaults",value:function(t){j(O,A(t)&&t)}}],(l=[{key:"init",value:function(){var t,n=this.element,e=n.tagName.toLowerCase();if(!n.cropper){if(n.cropper=this,"img"===e){if(this.isImg=!0,t=n.getAttribute("src")||"",this.originalUrl=t,!t)return;t=n.src}else"canvas"===e&&window.HTMLCanvasElement&&(t=n.toDataURL());this.load(t)}}},{key:"load",value:function(t){var n=this;if(t){this.url=t,this.imageData={};var e=this.element,l=this.options;if(l.rotatable||l.scalable||(l.checkOrientation=!1),l.checkOrientation&&window.ArrayBuffer)if(M.test(t))k.test(t)?this.read((i=t.replace(ht,""),a=atob(i),o=new ArrayBuffer(a.length),I(s=new Uint8Array(o),function(t,n){s[n]=a.charCodeAt(n)}),o)):this.clone();else{var i,a,o,s,r=new XMLHttpRequest,u=this.clone.bind(this);this.reloading=!0,this.xhr=r,r.onabort=u,r.onerror=u,r.ontimeout=u,r.onprogress=function(){"image/jpeg"!==r.getResponseHeader("content-type")&&r.abort()},r.onload=function(){n.read(r.response)},r.onloadend=function(){n.reloading=!1,n.xhr=null},l.checkCrossOrigin&&it(t)&&e.crossOrigin&&(t=at(t)),r.open("GET",t),r.responseType="arraybuffer",r.withCredentials="use-credentials"===e.crossOrigin,r.send()}else this.clone()}}},{key:"read",value:function(t){var n=this.options,e=this.imageData,l=function(t){var n,e=new DataView(t);try{var l,i,a;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var o=e.byteLength,s=2;s+1<o;){if(255===e.getUint8(s)&&225===e.getUint8(s+1)){i=s;break}s+=1}if(i){var r=i+4,u=i+10;if("Exif"===function(t,n,e){var l="";e+=r;for(var i=r;i<e;i+=1)l+=ut(t.getUint8(i));return l}(e,0,4)){var h=e.getUint16(u);if(((l=18761===h)||19789===h)&&42===e.getUint16(u+2,l)){var c=e.getUint32(u+4,l);c>=8&&(a=u+c)}}}if(a){var d,p,g=e.getUint16(a,l);for(p=0;p<g;p+=1)if(274===e.getUint16(d=a+12*p+2,l)){n=e.getUint16(d+=8,l),e.setUint16(d,1,l);break}}}catch(b){n=1}return n}(t),i=0,a=1,o=1;if(l>1){this.url=function(t,n){for(var e=[],l=new Uint8Array(t);l.length>0;)e.push(ut.apply(null,H(l.subarray(0,8192)))),l=l.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(e.join("")))}(t);var s=function(t){var n=0,e=1,l=1;switch(t){case 2:e=-1;break;case 3:n=-180;break;case 4:l=-1;break;case 5:n=90,l=-1;break;case 6:n=90;break;case 7:n=90,e=-1;break;case 8:n=-90}return{rotate:n,scaleX:e,scaleY:l}}(l);i=s.rotate,a=s.scaleX,o=s.scaleY}n.rotatable&&(e.rotate=i),n.scalable&&(e.scaleX=a,e.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,n=this.url,e=t.crossOrigin,l=n;this.options.checkCrossOrigin&&it(n)&&(e||(e="anonymous"),l=at(n)),this.crossOrigin=e,this.crossOriginUrl=l;var i=document.createElement("img");e&&(i.crossOrigin=e),i.src=l||n,i.alt=t.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),Y(i,p),t.parentNode.insertBefore(i,t.nextSibling)}},{key:"start",value:function(){var t=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var e=s.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(s.navigator.userAgent),l=function(n,e){j(t.imageData,{naturalWidth:n,naturalHeight:e,aspectRatio:n/e}),t.sizing=!1,t.sized=!0,t.build()};if(!n.naturalWidth||e){var i=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){l(i.width,i.height),e||a.removeChild(i)},i.src=n.src,e||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(i))}else l(n.naturalWidth,n.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,n=this.options,e=this.image,l=t.parentNode,i=document.createElement("div");i.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=i.querySelector(".".concat("cropper","-container")),o=a.querySelector(".".concat("cropper","-canvas")),s=a.querySelector(".".concat("cropper","-drag-box")),r=a.querySelector(".".concat("cropper","-crop-box")),u=r.querySelector(".".concat("cropper","-face"));this.container=l,this.cropper=a,this.canvas=o,this.dragBox=s,this.cropBox=r,this.viewBox=a.querySelector(".".concat("cropper","-view-box")),this.face=u,o.appendChild(e),Y(t,d),l.insertBefore(a,t.nextSibling),this.isImg||U(e,p),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,Y(r,d),n.guides||Y(r.getElementsByClassName("".concat("cropper","-dashed")),d),n.center||Y(r.getElementsByClassName("".concat("cropper","-center")),d),n.background&&Y(a,"".concat("cropper","-bg")),n.highlight||Y(u,g),n.cropBoxMovable&&(Y(u,m),$(u,v,"all")),n.cropBoxResizable||(Y(r.getElementsByClassName("".concat("cropper","-line")),d),Y(r.getElementsByClassName("".concat("cropper","-point")),d)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),L(n.ready)&&G(t,"ready",n.ready,{once:!0}),tt(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),U(this.element,d))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(e.prototype,l),i&&n(e,i),t;var e,l,i}();return j(ft.prototype,ct,dt,pt,gt,bt,mt),ft}()}}]);