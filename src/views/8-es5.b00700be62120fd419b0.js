(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ZAaW:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=function(){function n(n){this.messagesService=n}return n.prototype.ngOnInit=function(){},n.prototype.ngOnDestroy=function(){this.messagesService.leaveAllRoom()},n}(),s=e("mrSG"),u=e("oaey"),i=e("F/XL"),r=function(n){function l(){return n.call(this)||this}return s.c(l,n),l.prototype.resolve=function(n){return n.paramMap.get("room")||this.errorHandle({message:"not_found"})},l.prototype.errorHandle=function(n){return this.router.navigate(["/projects"]),Object(i.a)({data:null,error:n.message})},l.ngInjectableDef=t.Ib({factory:function(){return new l},token:l,providedIn:"root"}),l}(u.a),c=function(){return function(){}}(),a=e("pMnS"),g=e("Ip0R"),b=e("gIcY"),p=e("KJJU"),m=function(){function n(n,l){var e=this;this.chatWith=null,this.objectGroup={},Object.assign(this,n),this.group=this.group.map(function(n){var l=new p.a(n);return e.objectGroup[l._id]=l,l}),l&&this.group.length>1&&(this.chatWith=this.group.find(function(n){return n._id!==l._id}))}return n.prototype.roomName=function(n){return this.name||2!==this.group.length?{nickname:this.name,avatar:""}:this.group.find(function(l){return l._id!==n._id})},Object.defineProperty(n.prototype,"groupList",{get:function(){return this.group.map(function(n){return n.nickname}).join(", ")},enumerable:!0,configurable:!0}),n.prototype.haveNewMess=function(n){return this.read.length&&0===this.read.filter(function(l){return l===n._id}).length},n}(),d=e("wd/R"),h=function(n){function l(l,e,t,o){var s=n.call(this)||this;return s.messagesService=l,s.storageService=e,s.activatedRoute=t,s.location=o,s.rooms=[],s.usersSearch=[],s.currentRoom=null,s.form=new b.i({search:new b.f("")}),s.searchIsEmpty=!0,s}return s.c(l,n),l.prototype.ngOnInit=function(){var n=this;this.messagesService.getRooms();var l=this.form.get("search").valueChanges.subscribe(function(l){return n.searchValue(l)},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(l);var e=this.messagesService.onRoom().subscribe(function(l){return n.onRoom(l)},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(e);var t=this.messagesService.onRooms().subscribe(function(l){return n.onRooms(l)},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(t);var o=this.messagesService.onSearchUsers().subscribe(function(l){return n.usersSearch=l},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(o);var s=this.messagesService.onNotiMessage().subscribe(function(l){return n.onNotiMessage(l)},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(s)},l.prototype.searchValue=function(n){n&&n.length?(this.searchIsEmpty=!1,this.messagesService.getSearchUsers(n)):(this.usersSearch=[],this.searchIsEmpty=!0)},l.prototype.selectUser=function(n){this.messagesService.selectOrCreateRoom(n),this.form.reset()},l.prototype.onRooms=function(n){this.createAndSortingRooms(n),this.checkLink()},l.prototype.createAndSortingRooms=function(n){var l=this;void 0===n&&(n=this.rooms),this.rooms=n.map(function(n){return new m(n,l.storageService.user)}).sort(function(n,l){return d(l.updatedAt).diff(d(n.updatedAt))})},l.prototype.onRoom=function(n){var l=this;this.currentRoom=new m(n,this.storageService.user),this.rooms.filter(function(n){return n._id===l.currentRoom._id}).length||this.rooms.push(this.currentRoom),this.location.replaceState("/messages/"+this.currentRoom._id)},l.prototype.onNotiMessage=function(n){var l=this;this.rooms.map(function(e){"string"!=typeof n.owner&&e._id===n.room&&(e.read=[n.owner._id],e.updatedAt=n.updatedAt,l.createAndSortingRooms())})},l.prototype.checkLink=function(){var n=this,l=this.activatedRoute.data.subscribe(function(l){if(l.room){var e=n.rooms.find(function(n){return n.chatWith._id===l.room});e&&n.selectRoom(e)}},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(l)},l.prototype.selectRoom=function(n){n.haveNewMess(this.storageService.user)&&n.read.push(this.storageService.user._id),this.messagesService.selectRoom(n)},l}(u.a),f=e("yFR0"),v=function(){function n(n){this.socketService=n}return n.prototype.onSearchUsers=function(){return this.socketService.listen("onSearchUsers")},n.prototype.onRooms=function(){return this.socketService.listen("onRooms")},n.prototype.onRoom=function(){return this.socketService.listen("onRoom")},n.prototype.onLoadMoreMessages=function(){return this.socketService.listen("onLoadMoreMessages")},n.prototype.loadMoreMessages=function(n,l){this.socketService.emit("loadMoreMessages",{room:n,options:l})},n.prototype.onNotiMessage=function(){return this.socketService.listen("onNotiMessage")},n.prototype.getSearchUsers=function(n){this.socketService.emit("searchUsers",n.toLowerCase())},n.prototype.getRooms=function(){this.socketService.emit("rooms")},n.prototype.changeMessage=function(n){this.socketService.emit("changeMessage",n)},n.prototype.deleteMessage=function(n){this.socketService.emit("deleteMessage",n)},n.prototype.selectOrCreateRoom=function(n){this.socketService.emit("selectOrCreateRoom",n)},n.prototype.selectRoom=function(n){this.socketService.emit("selectRoom",n)},n.prototype.sendMessage=function(n,l){this.socketService.emit("message",n,l)},n.prototype.leaveAllRoom=function(){this.socketService.emit("leaveAllRoom")},n.ngInjectableDef=t.Ib({factory:function(){return new n(t.Mb(f.a))},token:n,providedIn:"root"}),n}(),C=e("fbMX"),M=e("ZYCi"),x=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:25%;border-right:1px solid #000;height:calc(100vh - 76px)}.users-search[_ngcontent-%COMP%]{padding:16px;display:flex;border-bottom:1px solid grey}.users-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:4px}.search-list[_ngcontent-%COMP%]{background:silver}.rooms-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .search-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:40px;display:flex;padding:8px;cursor:pointer}.rooms-list[_ngcontent-%COMP%]   li.newMess[_ngcontent-%COMP%], .search-list[_ngcontent-%COMP%]   li.newMess[_ngcontent-%COMP%]{border:1px solid red}.rooms-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%], .rooms-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover, .search-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%], .search-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background:#708090}.rooms-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .search-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#d3d3d3}.rooms-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .room-avatar[_ngcontent-%COMP%], .search-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .room-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20%}.rooms-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .room-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%], .search-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .room-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{overflow:hidden;width:40px;border-radius:100%;height:40px}"]],data:{}});function S(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,6,"li",[],[[2,"newMess",null],[2,"selected",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectRoom(n.context.$implicit)&&t),t},null,null)),(n()(),t.qb(1,0,null,null,2,"div",[["class","room-avatar"]],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,1,"span",[["class","avatar"]],null,null,null,null,null)),(n()(),t.qb(3,0,null,null,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null)),(n()(),t.qb(4,0,null,null,1,"span",[["class","room-name"]],null,null,null,null,null)),(n()(),t.Fb(5,null,["",""])),(n()(),t.Fb(6,null,[" "," "]))],null,function(n,l){var e=l.component,t=l.context.$implicit.haveNewMess(e.storageService.user);n(l,0,0,t,l.context.$implicit._id===(null==e.currentRoom?null:e.currentRoom._id)),n(l,3,0,l.context.$implicit.chatWith.avatar),n(l,5,0,l.context.$implicit.chatWith.nickname),n(l,6,0,l.context.$implicit.updatedAt)})}function _(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,2,"ul",[["class","rooms-list"]],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,S)),t.pb(2,278528,null,0,g.i,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.rooms)},null)}function y(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,4,"li",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectUser(n.context.$implicit)&&t),t},null,null)),(n()(),t.qb(1,0,null,null,1,"div",[["class","room-avatar"]],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,0,"span",[["class","avatar"]],null,null,null,null,null)),(n()(),t.qb(3,0,null,null,1,"span",[["class","room-name"]],null,null,null,null,null)),(n()(),t.Fb(4,null,[" "," "]))],null,function(n,l){n(l,4,0,l.context.$implicit.nickname)})}function P(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,2,"ul",[["class","search-list"]],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,y)),t.pb(2,278528,null,0,g.i,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.usersSearch)},null)}function O(n){return t.Gb(0,[(n()(),t.fb(16777216,null,null,1,null,P)),t.pb(1,16384,null,0,g.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(0,null,null,0))],function(n,l){n(l,1,0,!l.component.searchIsEmpty)},null)}function w(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,11,"div",[["class","users-search"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,10,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0;return"submit"===l&&(o=!1!==t.zb(n,3).onSubmit(e)&&o),"reset"===l&&(o=!1!==t.zb(n,3).onReset()&&o),o},null,null)),t.pb(2,16384,null,0,b.x,[],null,null),t.pb(3,540672,null,0,b.j,[[8,null],[8,null]],{form:[0,"form"]},null),t.Cb(2048,null,b.c,null,[b.j]),t.pb(5,16384,null,0,b.o,[[4,b.c]],null,null),(n()(),t.qb(6,0,null,null,5,"input",[["formControlName","search"],["placeholder","Write nickname..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var o=!0;return"input"===l&&(o=!1!==t.zb(n,7)._handleInput(e.target.value)&&o),"blur"===l&&(o=!1!==t.zb(n,7).onTouched()&&o),"compositionstart"===l&&(o=!1!==t.zb(n,7)._compositionStart()&&o),"compositionend"===l&&(o=!1!==t.zb(n,7)._compositionEnd(e.target.value)&&o),o},null,null)),t.pb(7,16384,null,0,b.d,[t.E,t.k,[2,b.a]],null,null),t.Cb(1024,null,b.l,function(n){return[n]},[b.d]),t.pb(9,671744,null,0,b.h,[[3,b.c],[8,null],[8,null],[6,b.l],[2,b.v]],{name:[0,"name"]},null),t.Cb(2048,null,b.m,null,[b.h]),t.pb(11,16384,null,0,b.n,[[4,b.m]],null,null),(n()(),t.qb(12,0,null,null,3,"div",[["class","list"]],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,_)),t.pb(14,16384,null,0,g.j,[t.P,t.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t.fb(0,[["searchList",2]],null,0,null,O))],function(n,l){var e=l.component;n(l,3,0,e.form),n(l,9,0,"search"),n(l,14,0,e.searchIsEmpty,t.zb(l,15))},function(n,l){n(l,1,0,t.zb(l,5).ngClassUntouched,t.zb(l,5).ngClassTouched,t.zb(l,5).ngClassPristine,t.zb(l,5).ngClassDirty,t.zb(l,5).ngClassValid,t.zb(l,5).ngClassInvalid,t.zb(l,5).ngClassPending),n(l,6,0,t.zb(l,11).ngClassUntouched,t.zb(l,11).ngClassTouched,t.zb(l,11).ngClassPristine,t.zb(l,11).ngClassDirty,t.zb(l,11).ngClassValid,t.zb(l,11).ngClassInvalid,t.zb(l,11).ngClassPending)})}var z=e("dU8u"),k=function(n){function l(l,e){var t=n.call(this)||this;return t.messagesService=l,t.storageService=e,t.currentRoom=null,t.moment=d,t.form=new b.i({message:new b.f("")}),t.formChange=new b.i({messageChange:new b.f("")}),t.options={skip:0},t.selectedChangeMessage=null,t}return s.c(l,n),l.prototype.ngOnInit=function(){var n=this,l=this.messagesService.onRoom().subscribe(function(l){n.currentRoom=new m(l),n.currentRoom.messages=n.currentRoom.messages.reverse(),n.options.skip=n.currentRoom.messages.length,n.boxScrollDown()},function(l){return n.errorHandlingService.showError(l)});this.someSubscriptions.add(l),this.messagesService.onLoadMoreMessages().subscribe(function(l){n.options.skip=n.options.skip+l.messages.length,n.currentRoom.messages=s.h(l.messages.reverse(),n.currentRoom.messages)})},l.prototype.selectMessToChange=function(n){this.selectedChangeMessage=n,this.formChange.get("messageChange").setValue(n.text)},l.prototype.changeMessage=function(){this.selectedChangeMessage.text=this.formChange.get("messageChange").value,this.messagesService.changeMessage(this.selectedChangeMessage),this.formChange.reset(),this.selectedChangeMessage=null},l.prototype.deleteMessage=function(n,l){this.messagesService.deleteMessage(n),this.currentRoom.messages.splice(l,1)},l.prototype.boxScrollDown=function(){var n=this;setTimeout(function(){n.messagebox.nativeElement.scrollTo(0,n.messagebox.nativeElement.scrollHeight)})},l.prototype.cancelChangeMessage=function(){this.selectedChangeMessage=null,this.formChange.reset()},l.prototype.loadMoreMessages=function(){this.messagesService.loadMoreMessages(this.currentRoom,this.options)},l.prototype.sendMessage=function(){var n=this;if(0!==this.form.get("message").value.trim().length){var l={type:"message",room:this.currentRoom._id,owner:this.storageService.user._id,text:this.form.get("message").value};this.messagesService.sendMessage(l,function(e){l._id=e._id,n.currentRoom.messages.push(l),n.form.reset(),n.boxScrollDown()})}else this.toastr.error("You cant send empty message")},l}(u.a),R=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:75%;height:calc(100vh - 76px)}.messages-box[_ngcontent-%COMP%]{display:flex;height:100%;flex-flow:column;justify-content:space-between}.header[_ngcontent-%COMP%], .messages[_ngcontent-%COMP%]{padding:8px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{height:calc(100vh - 225px);overflow-y:auto}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:16px;display:flex;flex-flow:column;min-height:60px;box-shadow:-2px -2px rgba(0,0,0,.02),-1px -1px rgba(0,0,0,.01),0 0 rgba(0,0,0,.01),1px 1px rgba(0,0,0,.01),2px 2px rgba(0,0,0,.02),3px 3px rgba(0,0,0,.03),4px 4px rgba(0,0,0,.04),5px 5px rgba(0,0,0,.05),6px 6px rgba(0,0,0,.06);border-radius:2px;align-items:flex-start;justify-content:space-between;max-width:50%;background:#292929;margin:16px;color:#fff;position:relative}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-control[_ngcontent-%COMP%]{position:absolute;display:flex;right:8px;top:8px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{width:85%;padding-right:16px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:10px;font-style:italic}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.owner[_ngcontent-%COMP%]{margin-left:auto;background:#00caec}.form[_ngcontent-%COMP%]{padding:8px;height:60px;display:flex;align-items:center;background:silver}"]],data:{}});function q(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,4,"div",[["class","message-control"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,1,"button",[["class","btn btn--small btn--outline-gold"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectMessToChange(n.parent.context.$implicit)&&t),t},null,null)),(n()(),t.Fb(-1,null,["C"])),(n()(),t.qb(3,0,null,null,1,"button",[["class","btn btn--small btn--outline-red"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.deleteMessage(n.parent.context.$implicit,n.parent.context.index)&&t),t},null,null)),(n()(),t.Fb(-1,null,["D"]))],null,null)}function I(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,7,"li",[],[[2,"owner",null]],null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,q)),t.pb(2,16384,null,0,g.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(n()(),t.qb(3,0,null,null,2,"div",[["class","message-text"]],null,null,null,null,null)),(n()(),t.qb(4,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t.Fb(5,null,["",""])),(n()(),t.qb(6,0,null,null,1,"div",[["class","message-time"]],null,null,null,null,null)),(n()(),t.Fb(7,null,[" "," "]))],function(n,l){var e=l.component;n(l,2,0,l.context.$implicit.owner===e.storageService.user._id&&!e.selectedChangeMessage)},function(n,l){var e=l.component;n(l,0,0,l.context.$implicit.owner===e.storageService.user._id),n(l,5,0,l.context.$implicit.text),n(l,7,0,e.moment(l.context.$implicit.createdAt).format("DD-MM-YYYY HH:mm"))})}function j(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,12,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0,s=n.component;return"submit"===l&&(o=!1!==t.zb(n,2).onSubmit(e)&&o),"reset"===l&&(o=!1!==t.zb(n,2).onReset()&&o),"ngSubmit"===l&&(o=!1!==s.sendMessage()&&o),o},null,null)),t.pb(1,16384,null,0,b.x,[],null,null),t.pb(2,540672,null,0,b.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Cb(2048,null,b.c,null,[b.j]),t.pb(4,16384,null,0,b.o,[[4,b.c]],null,null),(n()(),t.qb(5,0,null,null,5,"input",[["formControlName","message"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var o=!0;return"input"===l&&(o=!1!==t.zb(n,6)._handleInput(e.target.value)&&o),"blur"===l&&(o=!1!==t.zb(n,6).onTouched()&&o),"compositionstart"===l&&(o=!1!==t.zb(n,6)._compositionStart()&&o),"compositionend"===l&&(o=!1!==t.zb(n,6)._compositionEnd(e.target.value)&&o),o},null,null)),t.pb(6,16384,null,0,b.d,[t.E,t.k,[2,b.a]],null,null),t.Cb(1024,null,b.l,function(n){return[n]},[b.d]),t.pb(8,671744,null,0,b.h,[[3,b.c],[8,null],[8,null],[6,b.l],[2,b.v]],{name:[0,"name"]},null),t.Cb(2048,null,b.m,null,[b.h]),t.pb(10,16384,null,0,b.n,[[4,b.m]],null,null),(n()(),t.qb(11,0,null,null,1,"button",[["type","submit"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Send"]))],function(n,l){n(l,2,0,l.component.form),n(l,8,0,"message")},function(n,l){n(l,0,0,t.zb(l,4).ngClassUntouched,t.zb(l,4).ngClassTouched,t.zb(l,4).ngClassPristine,t.zb(l,4).ngClassDirty,t.zb(l,4).ngClassValid,t.zb(l,4).ngClassInvalid,t.zb(l,4).ngClassPending),n(l,5,0,t.zb(l,10).ngClassUntouched,t.zb(l,10).ngClassTouched,t.zb(l,10).ngClassPristine,t.zb(l,10).ngClassDirty,t.zb(l,10).ngClassValid,t.zb(l,10).ngClassInvalid,t.zb(l,10).ngClassPending)})}function E(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,14,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0,s=n.component;return"submit"===l&&(o=!1!==t.zb(n,2).onSubmit(e)&&o),"reset"===l&&(o=!1!==t.zb(n,2).onReset()&&o),"ngSubmit"===l&&(o=!1!==s.changeMessage()&&o),o},null,null)),t.pb(1,16384,null,0,b.x,[],null,null),t.pb(2,540672,null,0,b.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Cb(2048,null,b.c,null,[b.j]),t.pb(4,16384,null,0,b.o,[[4,b.c]],null,null),(n()(),t.qb(5,0,null,null,5,"input",[["formControlName","messageChange"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var o=!0;return"input"===l&&(o=!1!==t.zb(n,6)._handleInput(e.target.value)&&o),"blur"===l&&(o=!1!==t.zb(n,6).onTouched()&&o),"compositionstart"===l&&(o=!1!==t.zb(n,6)._compositionStart()&&o),"compositionend"===l&&(o=!1!==t.zb(n,6)._compositionEnd(e.target.value)&&o),o},null,null)),t.pb(6,16384,null,0,b.d,[t.E,t.k,[2,b.a]],null,null),t.Cb(1024,null,b.l,function(n){return[n]},[b.d]),t.pb(8,671744,null,0,b.h,[[3,b.c],[8,null],[8,null],[6,b.l],[2,b.v]],{name:[0,"name"]},null),t.Cb(2048,null,b.m,null,[b.h]),t.pb(10,16384,null,0,b.n,[[4,b.m]],null,null),(n()(),t.qb(11,0,null,null,1,"button",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.cancelChangeMessage()&&t),t},null,null)),(n()(),t.Fb(-1,null,["Cancel"])),(n()(),t.qb(13,0,null,null,1,"button",[["type","submit"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Change message"]))],function(n,l){n(l,2,0,l.component.formChange),n(l,8,0,"messageChange")},function(n,l){n(l,0,0,t.zb(l,4).ngClassUntouched,t.zb(l,4).ngClassTouched,t.zb(l,4).ngClassPristine,t.zb(l,4).ngClassDirty,t.zb(l,4).ngClassValid,t.zb(l,4).ngClassInvalid,t.zb(l,4).ngClassPending),n(l,5,0,t.zb(l,10).ngClassUntouched,t.zb(l,10).ngClassTouched,t.zb(l,10).ngClassPristine,t.zb(l,10).ngClassDirty,t.zb(l,10).ngClassValid,t.zb(l,10).ngClassInvalid,t.zb(l,10).ngClassPending)})}function F(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,10,"div",[["class","messages-box"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,4,"div",[["class","messages"]],null,null,null,null,null)),(n()(),t.qb(2,0,[[1,0],["messagebox",1]],null,3,"ul",[["infiniteScroll",""]],null,[[null,"scrolledUp"]],function(n,l,e){var t=!0;return"scrolledUp"===l&&(t=!1!==n.component.loadMoreMessages()&&t),t},null,null)),t.pb(3,4866048,null,0,z.a,[t.k,t.A],{infiniteScrollDistance:[0,"infiniteScrollDistance"],infiniteScrollThrottle:[1,"infiniteScrollThrottle"],scrollWindow:[2,"scrollWindow"]},{scrolledUp:"scrolledUp"}),(n()(),t.fb(16777216,null,null,1,null,I)),t.pb(5,278528,null,0,g.i,[t.P,t.M,t.t],{ngForOf:[0,"ngForOf"]},null),(n()(),t.qb(6,0,null,null,4,"div",[["class","form"]],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,j)),t.pb(8,16384,null,0,g.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,null,1,null,E)),t.pb(10,16384,null,0,g.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,3,0,2,50,!1),n(l,5,0,e.currentRoom.messages),n(l,8,0,!e.selectedChangeMessage),n(l,10,0,e.selectedChangeMessage)},null)}function U(n){return t.Gb(0,[t.Db(671088640,1,{messagebox:0}),(n()(),t.fb(16777216,null,null,1,null,F)),t.pb(2,16384,null,0,g.j,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.component.currentRoom)},null)}var G=t.ob({encapsulation:0,styles:[[".messages[_ngcontent-%COMP%]{display:flex;border-right:1px solid #000;border-left:1px solid #000;border-bottom:1px solid #000;background:#fff}"]],data:{}});function N(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,4,"div",[["class","messages"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,1,"app-sidebar",[],null,null,null,w,x)),t.pb(2,245760,null,0,h,[v,C.a,M.a,g.f],null,null),(n()(),t.qb(3,0,null,null,1,"app-messages-box",[],null,null,null,U,R)),t.pb(4,245760,null,0,k,[v,C.a],null,null)],function(n,l){n(l,2,0),n(l,4,0)},null)}function D(n){return t.Gb(0,[(n()(),t.qb(0,0,null,null,1,"app-messages",[],null,null,null,N,G)),t.pb(1,245760,null,0,o,[v],null,null)],function(n,l){n(l,1,0)},null)}var T=t.mb("app-messages",o,D,{},{},[]),A=e("t/Na"),H=e("XPwU"),$=e("eG2b"),L=e("yTb8"),V=e("NHGN"),W=e("SZbH"),Y=e("Zseb"),X=e("PCNd"),J=function(){return function(){}}();e.d(l,"MessagesRoutingModuleNgFactory",function(){return Z});var Z=t.nb(c,[],function(n){return t.wb([t.xb(512,t.j,t.ab,[[8,[a.a,T]],[3,t.j],t.y]),t.xb(4608,g.l,g.k,[t.v,[2,g.t]]),t.xb(4608,b.u,b.u,[]),t.xb(4608,A.h,A.n,[g.c,t.C,A.l]),t.xb(4608,A.o,A.o,[A.h,A.m]),t.xb(4608,C.a,C.a,[M.o]),t.xb(4608,A.k,A.k,[]),t.xb(6144,A.i,null,[A.k]),t.xb(4608,A.g,A.g,[A.i]),t.xb(6144,A.b,null,[A.g]),t.xb(4608,A.f,A.j,[A.b,t.r]),t.xb(4608,A.c,A.c,[A.f]),t.xb(5120,A.a,function(n,l,e,t,o){return[n,new H.a(l,e,t,o)]},[A.o,C.a,M.o,M.a,A.c]),t.xb(4608,b.e,b.e,[]),t.xb(4608,$.g,$.d,[A.c]),t.xb(5120,$.f,$.c,[[3,$.f],$.g,t.C,[2,$.b],[2,g.c]]),t.xb(4608,L.a,L.a,[A.c]),t.xb(4608,V.a,V.a,[W.j,C.a]),t.xb(1073742336,M.q,M.q,[[2,M.v],[2,M.o]]),t.xb(1073742336,g.b,g.b,[]),t.xb(1073742336,b.t,b.t,[]),t.xb(1073742336,b.k,b.k,[]),t.xb(1073742336,A.e,A.e,[]),t.xb(1073742336,A.d,A.d,[]),t.xb(1073742336,b.r,b.r,[]),t.xb(1073742336,Y.b,Y.b,[]),t.xb(1073742336,$.a,$.a,[]),t.xb(1073742336,z.b,z.b,[]),t.xb(1073742336,X.a,X.a,[]),t.xb(1073742336,J,J,[]),t.xb(1073742336,c,c,[]),t.xb(256,A.l,"XSRF-TOKEN",[]),t.xb(256,A.m,"X-XSRF-TOKEN",[]),t.xb(1024,M.m,function(){return[[{path:"",component:o},{path:":room",component:o,resolve:{room:r}}]]},[])])})}}]);